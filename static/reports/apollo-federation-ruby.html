<!doctype html><html lang=en><meta charset=UTF-8><meta content="width=device-width,initial-scale=1.0" name=viewport><title>Repository Health Report - apollo-federation-ruby</title><link href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3Cpath fill='%237A4A22' d='M160 90C160 60 352 60 352 90L352 130L160 130Z'/%3E%3Crect fill='%235E3618' x='140' y='130' width='232' height='28' rx='14'/%3E%3Cellipse fill='%233B8C8E' cx='138' cy='220' rx='28' ry='42'/%3E%3Cellipse fill='%233B8C8E' cx='374' cy='220' rx='28' ry='42'/%3E%3Cpath fill='%234FA3A5' d='M128 180C128 130 384 130 384 180V360C384 410 128 410 128 360Z'/%3E%3Cellipse fill='%23FFFFFF' cx='220' cy='240' rx='34' ry='38'/%3E%3Cellipse fill='%23FFFFFF' cx='292' cy='240' rx='34' ry='38'/%3E%3Ccircle fill='%231B1B1B' cx='228' cy='252' r='10'/%3E%3Ccircle fill='%231B1B1B' cx='300' cy='252' r='10'/%3E%3Cellipse fill='%232A2A2A' cx='256' cy='286' rx='14' ry='10'/%3E%3Crect fill='%23F2F2F2' x='242' y='304' width='12' height='24' rx='3'/%3E%3Crect fill='%23F2F2F2' x='258' y='304' width='12' height='24' rx='3'/%3E%3Cg transform='translate(330 260)'%3E%3Ccircle fill='%23C9B36D' cx='0' cy='0' r='56'/%3E%3Ccircle fill='%23FFF6D5' cx='0' cy='0' r='42'/%3E%3Crect fill='%236A4020' x='40' y='40' width='90' height='14' rx='7' transform='rotate(35)'/%3E%3C/g%3E%3Cpath fill='%233B8C8E' d='M128 330C180 360 332 360 384 330V360C384 410 128 410 128 360Z' opacity='0.6'/%3E%3C/svg%3E" rel=icon type=image/svg+xml><link href=https://cdn.jsdelivr.net/npm/simple-datatables@9/dist/style.min.css rel=stylesheet><style>:root{--bg-primary:#0d1117;--bg-secondary:#161b22;--bg-tertiary:#21262d;--text-primary:#e6edf3;--text-secondary:#8b949e;--border-color:#30363d;--accent-green:#3fb950;--accent-yellow:#d29922;--accent-red:#f85149;--accent-blue:#58a6ff;--accent-purple:#a371f7;--sidebar-width:220px}*{box-sizing:border-box;margin:0;padding:0}body{background:var(--bg-primary);color:var(--text-primary);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Noto Sans,Helvetica,Arial,sans-serif;line-height:1.6}.sidebar{width:var(--sidebar-width);background:var(--bg-secondary);border-right:1px solid var(--border-color);z-index:100;height:100vh;padding:1.5rem 0;position:fixed;top:0;left:0;overflow-y:auto}.sidebar-header{border-bottom:1px solid var(--border-color);margin-bottom:1rem;padding:0 1rem 1rem}.sidebar-header h2{color:var(--text-secondary);font-size:1rem;font-weight:500}.sidebar-score{margin-top:.25rem;font-size:2rem;font-weight:700}.sidebar-score.good{color:var(--accent-green)}.sidebar-score.warning{color:var(--accent-yellow)}.sidebar-score.danger{color:var(--accent-red)}.nav-section{padding:.5rem 0}.nav-section-title{text-transform:uppercase;letter-spacing:.05em;color:var(--text-secondary);margin-top:.5rem;padding:.5rem 1rem;font-size:.7rem}.nav-item{color:var(--text-secondary);align-items:center;gap:.5rem;padding:.5rem 1rem;font-size:.85rem;text-decoration:none;transition:all .15s;display:flex}.nav-item:hover{background:var(--bg-tertiary);color:var(--text-primary)}.nav-item.active{background:var(--bg-tertiary);color:var(--text-primary);border-left:2px solid var(--accent-blue)}.nav-dot{border-radius:50%;flex-shrink:0;width:8px;height:8px}.nav-dot.good{background:var(--accent-green)}.nav-dot.warning{background:var(--accent-yellow)}.nav-dot.danger{background:var(--accent-red)}.nav-dot.neutral{background:var(--text-secondary)}.main-content{padding:2rem 3rem 2rem calc(var(--sidebar-width) + 3rem);max-width:calc(1400px + var(--sidebar-width));margin:0 auto}.hero{border-bottom:1px solid var(--border-color);grid-template-columns:200px 280px 1fr;align-items:center;gap:2rem;margin-bottom:3rem;padding-bottom:2rem;display:grid}.hero-score{text-align:center}.score-circle{border-radius:50%;flex-direction:column;justify-content:center;align-items:center;width:160px;height:160px;margin:0 auto;display:flex;position:relative}.score-circle.good{background:conic-gradient(var(--accent-green) 0deg, var(--accent-green) calc(var(--score) * 3.6deg), var(--bg-tertiary) calc(var(--score) * 3.6deg))}.score-circle.warning{background:conic-gradient(var(--accent-yellow) 0deg, var(--accent-yellow) calc(var(--score) * 3.6deg), var(--bg-tertiary) calc(var(--score) * 3.6deg))}.score-circle.danger{background:conic-gradient(var(--accent-red) 0deg, var(--accent-red) calc(var(--score) * 3.6deg), var(--bg-tertiary) calc(var(--score) * 3.6deg))}.score-circle:before{content:"";background:var(--bg-primary);border-radius:50%;width:130px;height:130px;position:absolute}.score-value{z-index:1;font-size:2.5rem;font-weight:700;position:relative}.score-label{color:var(--text-secondary);z-index:1;font-size:.8rem;position:relative}.hero-trend-stat{text-align:center;margin-top:.75rem}.hero-trend-value{color:var(--text-secondary);font-size:1.1rem;font-weight:700}.hero-trend-value.down{color:var(--accent-red)}.hero-trend-value.up{color:var(--accent-green)}.hero-trend-rate{color:var(--text-secondary);margin-top:.15rem;font-size:.75rem}.hero-radar{height:200px}.hero-metrics{grid-template-columns:repeat(2,1fr);gap:1rem;display:grid}.metric-card{background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:8px;padding:1rem}.metric-card-value{font-size:1.5rem;font-weight:700}.metric-card-label{color:var(--text-secondary);margin-top:.25rem;font-size:.75rem}.metric-card-value.good{color:var(--accent-green)}.metric-card-value.warning{color:var(--accent-yellow)}.metric-card-value.danger{color:var(--accent-red)}.section{margin:2.5rem 0;scroll-margin-top:1rem}.section-header{align-items:center;gap:.75rem;margin-bottom:1rem;display:flex}.section-header h2{font-size:1.4rem;font-weight:600}.section-subtitle{color:var(--text-secondary);margin-bottom:1rem;font-size:.9rem}.card{background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:8px;margin-bottom:1rem;padding:1.5rem}.card h3{color:var(--text-primary);margin-bottom:1rem;font-size:1rem}.card.highlight-red{border-left:4px solid var(--accent-red)}.card.highlight-yellow{border-left:4px solid var(--accent-yellow)}.card.highlight-green{border-left:4px solid var(--accent-green)}.card.highlight-blue{border-left:4px solid var(--accent-blue)}.recommendations-list{flex-direction:column;gap:1.5rem;display:flex}.recommendation-category{text-transform:uppercase;letter-spacing:.05em;align-items:center;gap:.5rem;margin-bottom:.75rem;font-size:.85rem;font-weight:600;display:flex}.recommendation-item{border-bottom:1px solid var(--border-color);padding:.75rem 0}.recommendation-item:last-child{border-bottom:none}.recommendation-item strong{margin-bottom:.25rem;display:block}.recommendation-item>div{color:var(--text-secondary);font-size:.9rem;line-height:1.5}.recommendation-item>div p{margin:.25rem 0}.recommendation-item>div p:first-child{margin-top:0}.stat-grid{grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:1rem;margin:1rem 0;display:grid}.stat-box{background:var(--bg-tertiary);text-align:center;border-radius:8px;padding:1rem}.stat-box .value{font-size:1.75rem;font-weight:700}.stat-box .label{color:var(--text-secondary);margin-top:.25rem;font-size:.75rem}.table-container{background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:8px;overflow:hidden}.datatable-wrapper{background:var(--bg-secondary);border-radius:8px;overflow:hidden}.datatable-top,.datatable-bottom{background:var(--bg-secondary);padding:.75rem 1rem}.datatable-search input{background:var(--bg-tertiary);border:1px solid var(--border-color);color:var(--text-primary);border-radius:6px;padding:.5rem .75rem}.datatable-search input::placeholder{color:var(--text-secondary)}.datatable-search input:focus{border-color:var(--accent-blue);outline:none}.datatable-selector{background:var(--bg-tertiary);border:1px solid var(--border-color);color:var(--text-primary);border-radius:6px;padding:.25rem .5rem}.datatable-info{color:var(--text-secondary);font-size:.85rem}.datatable-pagination-list{gap:.25rem;display:flex}.datatable-pagination-list-item-link{background:var(--bg-tertiary);border:1px solid var(--border-color);color:var(--text-primary);border-radius:4px;padding:.25rem .5rem;text-decoration:none}.datatable-pagination-list-item-link:hover{background:var(--bg-primary)}.datatable-pagination-list-item.datatable-active .datatable-pagination-list-item-link{background:var(--accent-blue);border-color:var(--accent-blue)}.datatable-pagination-list-item.datatable-disabled .datatable-pagination-list-item-link{opacity:.5;cursor:not-allowed}.datatable-table th{cursor:pointer;user-select:none}.datatable-table th:hover{color:var(--text-primary)}.datatable-sorter{color:var(--text-secondary)}.datatable-sorter:before,.datatable-sorter:after{border-color:var(--text-secondary) transparent}table{border-collapse:collapse;width:100%}th,td{text-align:left;border-bottom:1px solid var(--border-color);padding:.75rem 1rem}th{background:var(--bg-tertiary);color:var(--text-secondary);text-transform:uppercase;letter-spacing:.03em;font-size:.8rem;font-weight:600}tr:hover td{background:var(--bg-tertiary)}.badge{border-radius:4px;padding:.2rem .5rem;font-size:.75rem;font-weight:600;display:inline-block}.badge.critical{color:var(--accent-red);background:#f8514933}.badge.high{color:var(--accent-yellow);background:#d2992233}.badge.medium{color:var(--accent-blue);background:#58a6ff33}.badge.low{color:var(--accent-green);background:#3fb95033}.files-badge{background:var(--bg-tertiary);color:var(--accent-blue);cursor:help;border:1px solid var(--border-color);border-radius:4px;padding:.15rem .4rem;font-size:.75rem;font-weight:500;display:inline-block}.files-badge:hover{background:var(--bg-secondary);border-color:var(--accent-blue)}.tooltip{cursor:help;border-bottom:1px dotted var(--text-secondary)}.tippy-box{background:var(--bg-primary);border:1px solid var(--border-color);color:var(--text-primary);font-size:.8rem;font-weight:400;line-height:1.4;box-shadow:0 4px 12px #0000004d}.tippy-box[data-placement^=top]>.tippy-arrow:before{border-top-color:var(--border-color)}.tippy-box[data-placement^=bottom]>.tippy-arrow:before{border-bottom-color:var(--border-color)}.tippy-content{white-space:pre-wrap;word-break:break-all;max-width:500px;padding:.5rem .75rem}.narrative{color:var(--text-secondary);font-size:.95rem;line-height:1.7}.narrative p{margin:0 0 1em}.narrative p:last-child{margin-bottom:0}.narrative h1,.narrative h2,.narrative h3,.narrative h4{color:var(--text-primary);margin:1.5em 0 .75em;font-weight:600}.narrative h1:first-child,.narrative h2:first-child,.narrative h3:first-child{margin-top:0}.narrative h1{font-size:1.4rem}.narrative h2{font-size:1.2rem}.narrative h3{font-size:1.05rem}.narrative h4{font-size:.95rem}.narrative ul,.narrative ol{margin:.75em 0;padding-left:1.5em}.narrative li{margin:.35em 0}.narrative li::marker{color:var(--accent-blue)}.narrative strong{color:var(--text-primary);font-weight:600}.narrative em{font-style:italic}.narrative code{background:var(--bg-tertiary);color:var(--accent-blue);border-radius:4px;padding:.15em .4em;font-family:SF Mono,Menlo,Monaco,Courier New,monospace;font-size:.9em}.narrative pre{background:var(--bg-tertiary);border-radius:6px;margin:1em 0;padding:1em;overflow-x:auto}.narrative pre code{color:var(--text-primary);background:0 0;padding:0;font-size:.85em}.narrative blockquote{border-left:3px solid var(--accent-blue);color:var(--text-secondary);background:var(--bg-tertiary);border-radius:0 4px 4px 0;margin:1em 0;padding:.5em 0 .5em 1em}.narrative blockquote p{margin:0}.narrative a{color:var(--accent-blue);text-decoration:none}.narrative a:hover{text-decoration:underline}.narrative hr{border:none;border-top:1px solid var(--border-color);margin:1.5em 0}.narrative table{border-collapse:collapse;width:100%;margin:1em 0;font-size:.9em}.narrative th,.narrative td{text-align:left;border:1px solid var(--border-color);padding:.5em .75em}.narrative th{background:var(--bg-tertiary);color:var(--text-primary);font-weight:600}.chart-container{background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:8px;margin:1rem 0;padding:1.5rem}.chart-container h3{margin-bottom:1rem;font-size:1rem}.chart-wrapper{height:350px;position:relative}.grid-2{grid-template-columns:repeat(2,1fr);gap:1.5rem;display:grid}.grid-3{grid-template-columns:repeat(3,1fr);gap:1rem;display:grid}.collapsible{background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:8px;margin:1rem 0}.collapsible-header{cursor:pointer;user-select:none;justify-content:space-between;align-items:center;padding:1rem 1.5rem;display:flex}.collapsible-header:hover{background:var(--bg-tertiary);border-radius:8px}.collapsible-header h3{margin:0;font-size:1rem}.collapsible-toggle{color:var(--text-secondary);font-size:1.2rem;transition:transform .2s}.collapsible.open .collapsible-toggle{transform:rotate(180deg)}.collapsible-content{padding:0 1.5rem 1.5rem;display:none}.collapsible.open .collapsible-content{display:block}.key-finding{border-bottom:1px solid var(--border-color);color:var(--text-secondary);padding:.75rem 0}.key-finding:last-child{border-bottom:none}.progress-bar{background:var(--bg-tertiary);border-radius:3px;height:6px;margin-top:.5rem;overflow:hidden}.progress-fill{border-radius:3px;height:100%}.progress-fill.good{background:var(--accent-green)}.progress-fill.warning{background:var(--accent-yellow)}.progress-fill.danger{background:var(--accent-red)}.component-card{background:var(--bg-secondary);border:1px solid var(--border-color);border-radius:8px;padding:1rem}.component-card-header{justify-content:space-between;align-items:center;margin-bottom:.5rem;display:flex}.component-card-name{color:var(--text-secondary);font-size:.85rem}.component-card-score{font-size:1.25rem;font-weight:700}.component-card-weight{color:var(--text-secondary);font-size:.7rem}.report-header{border-bottom:1px solid var(--border-color);justify-content:space-between;align-items:flex-start;margin-bottom:2rem;padding-bottom:1.5rem;display:flex}.report-title{flex-direction:column;gap:.5rem;display:flex}.report-title h1{align-items:center;gap:.5rem;margin:0;font-size:1.75rem;font-weight:600;display:flex}.report-title h1 code{color:var(--accent-blue);background:var(--bg-tertiary);border-radius:4px;padding:.1rem .4rem;font-size:1.5rem;font-weight:500}.report-meta{color:var(--text-secondary);gap:1.5rem;font-size:.85rem;display:flex}.report-meta-item{align-items:center;gap:.35rem;display:flex}.report-branding a{color:var(--text-primary);align-items:center;gap:.5rem;text-decoration:none;display:flex}.report-branding a:hover{color:var(--accent-blue)}.branding-text{text-align:right;flex-direction:column;align-items:flex-end;line-height:1.2;display:flex}.branding-name{font-size:1rem;font-weight:600}.branding-version{color:var(--text-muted);opacity:.7;font-size:.65rem}.omen-logo{width:32px;height:32px}footer{text-align:center;border-top:1px solid var(--border-color);color:var(--text-secondary);margin-top:3rem;padding:2rem}footer a{color:var(--accent-blue)}@media (width<=1200px){.hero{grid-template-columns:180px 1fr}.hero-radar{display:none}}@media (width<=900px){.sidebar{display:none}.main-content{max-width:100%;padding:1.5rem}.hero{text-align:center;grid-template-columns:1fr}.hero-metrics{grid-template-columns:repeat(2,1fr)}.recommendations-grid,.grid-2,.grid-3{grid-template-columns:1fr}}.cell-overflow{text-overflow:ellipsis;white-space:nowrap;max-width:300px;overflow:hidden}.event-commits{text-overflow:ellipsis;white-space:nowrap;max-width:400px;color:var(--text-secondary);font-size:.85rem;overflow:hidden}</style><body><nav class=sidebar><div class=sidebar-header><h2>Health Score</h2><div class="sidebar-score good">89</div></div><div class=nav-section><div class=nav-section-title>Overview</div><a class=nav-item href=#quick-insights> <span class="nav-dot good"></span> Quick Insights </a><a class=nav-item href=#summary> <span class="nav-dot neutral"></span> Executive Summary </a><a class=nav-item href=#recommendations> <span class="nav-dot danger"></span> Recommendations </a><a class=nav-item href=#findings> <span class="nav-dot neutral"></span> Key Findings </a></div><div class=nav-section><div class=nav-section-title>Risk Areas</div><a class=nav-item href=#cohesion> <span class="nav-dot danger"></span> Low Cohesion </a><a class=nav-item href=#dependencies> <span class="nav-dot good"></span> Dependencies </a></div><div class=nav-section><div class=nav-section-title>Technical Debt</div><a class=nav-item href=#satd> <span class="nav-dot good"></span> Known Issues </a><a class=nav-item href=#duplicates> <span class="nav-dot good"></span> Duplication </a><a class=nav-item href=#tdg> <span class="nav-dot good"></span> Debt Gradient </a></div><div class=nav-section><div class=nav-section-title>Analysis</div><a class=nav-item href=#trends> <span class="nav-dot warning"></span> Trends </a><a class=nav-item href=#churn> <span class="nav-dot neutral"></span> Change Activity </a><a class=nav-item href=#ownership> <span class="nav-dot warning"></span> Ownership </a></div><div class=nav-section><div class=nav-section-title>Reference</div><a class=nav-item href=#breakdown> <span class="nav-dot neutral"></span> Score Breakdown </a><a class=nav-item href=#glossary> <span class="nav-dot neutral"></span> Glossary </a></div></nav><main class=main-content><header class=report-header><div class=report-title><h1>Health Report: <code>apollo-federation-ruby</code></h1><div class=report-meta><span class=report-meta-item> <svg viewbox="0 0 16 16" fill=currentColor height=14 width=14><path d="M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0ZM1.5 8a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0Zm7-3.25v2.992l2.028.812a.75.75 0 0 1-.557 1.392l-2.5-1A.751.751 0 0 1 7 8.25v-3.5a.75.75 0 0 1 1.5 0Z"></path></svg> <span class=human-date data-iso=2026-02-01T02:06:27.555996Z>2026-02-01T02:06:27.555996Z</span> </span><span class=report-meta-item> <svg viewbox="0 0 16 16" fill=currentColor height=14 width=14><path d="M5.75 0a.75.75 0 0 1 .75.75V2h3V.75a.75.75 0 0 1 1.5 0V2h1.25c.966 0 1.75.784 1.75 1.75v10.5A1.75 1.75 0 0 1 12.25 16H3.75A1.75 1.75 0 0 1 2 14.25V3.75C2 2.784 2.784 2 3.75 2H5V.75A.75.75 0 0 1 5.75 0Zm-2 5.5a.25.25 0 0 0-.25.25v8.5c0 .138.112.25.25.25h8.5a.25.25 0 0 0 .25-.25v-8.5a.25.25 0 0 0-.25-.25Z"></path></svg> 1y history </span></div></div><div class=report-branding><a href=https://github.com/panbanda/omen target=_blank> <span class=branding-text> <span class=branding-name>omen</span> <span class=branding-version>4.20.3</span> </span> </a></div></header><section class=hero><div class=hero-score><div class="score-circle good" style=--score:89><span class=score-value>89</span><span class=score-label>Health Score</span></div><div class=hero-trend-stat><div class="hero-trend-value down">Declining</div><div class=hero-trend-rate>-0.14 pts/mo</div></div></div><div class=hero-radar><div id=radarChart style=width:100%;height:200px></div></div><div class=hero-metrics><div class=metric-card><div class=metric-card-value>46</div><div class=metric-card-label>Files Analyzed</div></div><div class=metric-card><div class="metric-card-value good">0</div><div class=metric-card-label>Critical Issues</div></div><div class=metric-card><div class="metric-card-value good">4.1%</div><div class=metric-card-label>Duplication</div></div></div></section><section class=section id=quick-insights><div class=section-header><h2>Quick Insights</h2></div><p class=section-subtitle>Key findings from the analysis - prioritized by impact<div class=grid-2><div class="card highlight-green"><h3>Healthy Codebase</h3><p style=color:var(--text-secondary)>Overall health score of <strong>89</strong> indicates a well-maintained codebase. Continue current practices and address issues as they arise.</div></div></section><section class=section id=summary><div class=section-header><h2>Executive Summary</h2></div><div class=card><div class=narrative><p>The apollo-federation-ruby codebase scores 88.7/100 (grade B) across 46 files and 74 classes, with zero critical issues and zero architectural smells. Production code is nearly pristine -- no library file scores below A-. The score has been flat at 88 for nearly a year, declining only 1 point since February 2025, indicating a stable and mature codebase with no active degradation.<p>However, stability masks two structural risks. First, knowledge ownership is dangerously concentrated: the tracing subsystem (tracer.rb, node_map.rb, proto.rb) is effectively owned by a single contributor (Lenny Burdette), and this same subsystem is the most complex and defect-prone area of the codebase, with repeated breakage against upstream graphql-ruby API changes. If Lenny becomes unavailable, no one else has sufficient context to maintain the tracing layer. Second, 4 production files (enum.rb, input_object.rb, scalar.rb, union.rb) are byte-for-byte identical copies differing only in module name, representing a missing abstraction that creates a real divergence risk when adding new directives.<p>The path forward is straightforward: cross-train a second developer on the tracing subsystem, extract the two missing shared modules from duplicated production files, and clean up the 6 stale TODOs (some over 6 years old) that clutter entity resolution logic. Cohesion (67/100) is the weakest metric and the only one with a declining trend, driven primarily by FederatedDocumentFromSchemaDefinition (LCOM 15) and the Tracer classes (LCOM 13), though some of this is inflated by Ruby's mixin pattern.</div></div></section><section class=section id=recommendations><div class=section-header><h2>Recommendations</h2></div><p class=section-subtitle>Prioritized actions to improve code health<div class=recommendations-list><div class="card highlight-red"><div class=recommendation-category style=color:var(--accent-red)><span class="nav-dot danger"></span> Critical - Address Soon</div><div class=recommendation-item><strong>Cross-train a developer on the tracing subsystem</strong><div><p>lib/apollo-federation/tracing/tracer.rb (283 lines, cognitive complexity 52) is the most complex and defect-prone file, owned primarily by Lenny Burdette. The entire tracing subsystem (tracer.rb, node_map.rb, proto.rb, node_map_spec.rb, generate-protos.sh) has a bus factor of 1. Pair another developer into this subsystem and require cross-reviewer assignments on all tracing PRs.</div></div><div class=recommendation-item><strong>Extract shared directive-type mixin from 4 identical files</strong><div><p>lib/apollo-federation/enum.rb, input_object.rb, scalar.rb, and union.rb are byte-for-byte identical (23 lines each, 92 duplicated lines total). Extract a shared module (e.g., ApolloFederation::DirectiveType) providing the ClassMethods with tag() and inaccessible(). This eliminates 69 lines and removes the risk of adding a directive to one file but not the others.</div></div><div class=recommendation-item><strong>Extract shared v2 directive initializer for argument.rb and enum_value.rb</strong><div><p>lib/apollo-federation/argument.rb and lib/apollo-federation/enum_value.rb are entirely identical (25 duplicated lines each). Extract a shared module containing VERSION_2_DIRECTIVES, the initialize override, and add_v2_directives. This eliminates a likely source of divergence bugs when new v2 directives are added.</div></div><div class=recommendation-item><strong>Add dedicated specs for has_directives.rb, entity.rb, and federated_document_from_schema_definition.rb</strong><div><p>lib/apollo-federation/has_directives.rb is the most structurally central module (PageRank 0.033, 9 dependents) but has no dedicated test file. lib/apollo-federation/entity.rb and lib/apollo-federation/federated_document_from_schema_definition.rb are also untested directly. These are core federation modules that should not rely solely on indirect coverage.</div></div></div><div class="card highlight-yellow"><div class=recommendation-category style=color:var(--accent-yellow)><span class="nav-dot warning"></span> Important - Plan For</div><div class=recommendation-item><strong>Refactor spec/apollo-federation/service_field_v2_spec.rb</strong><div><p>The worst-graded file in the codebase (C+, score 77.6) with 49.7% duplication and cyclomatic complexity 56. Extract shared test setup and repeated assertion patterns. Consider sharing spec helpers with service_field_v1_spec.rb (35.3% duplication, grade B+) to lift both files.</div></div><div class=recommendation-item><strong>Clean up stale TODOs in entity resolution code</strong><div><p>entities_field.rb contains 4 TODOs, two dating to the initial commit (2019). Remove the stale TODO at line 41 (question already answered in practice) and at any.rb line 10 (decision made implicitly). For entities_field.rb lines 49 and schema.rb line 82 (interface @key support), either implement or document the limitation and remove the TODOs.</div></div><div class=recommendation-item><strong>Introduce an adapter layer for graphql-ruby version compatibility in tracer.rb</strong><div><p>Churn analysis shows repeated breakage of tracer.rb against upstream graphql-ruby API changes (2.3, 2.5.12+). An abstraction layer isolating version-specific tracer behavior would reduce defect risk and simplify future graphql-ruby upgrades.</div></div><div class=recommendation-item><strong>Improve cohesion of FederatedDocumentFromSchemaDefinition</strong><div><p>LCOM score of 15 (16 methods, 1 shared field) makes this the least cohesive class. Most methods are independent build_*_node wrappers. Consider grouping related builder methods into smaller collaborator classes or a builder pattern to improve cohesion from its current 67/100 component score.</div></div></div><div class="card highlight-blue"><div class=recommendation-category style=color:var(--accent-blue)><span class="nav-dot neutral"></span> Maintenance - Keep Doing</div><div class=recommendation-item><strong>Monitor has_directives.rb fan-in growth</strong><div><p>Currently at 9 dependents (hub threshold is 20). This is the closest module to becoming a coupling bottleneck. Track fan-in as new federation type extensions are added.</div></div><div class=recommendation-item><strong>Monitor tracer.rb complexity against churn</strong><div><p>At cognitive complexity 52 and cyclomatic 47, tracer.rb is the closest file to becoming a hotspot. If change frequency increases above its current 4 commits/197 days, it should be split into separate legacy-tracer and trace-based modules.</div></div><div class=recommendation-item><strong>Require cross-reviewer assignments on ownership silos</strong><div><p>7 files have 100% single-owner concentration. Enforce a policy that PRs touching silo files must be reviewed by someone other than the primary owner to gradually spread knowledge.</div></div><div class=recommendation-item><strong>Track cohesion trend across releases</strong><div><p>Cohesion is the only component with a negative slope (-0.29). If it drops below 65, prioritize decomposition of the highest-LCOM classes. Current trajectory suggests this could happen within 2-3 releases if the pattern from graphql-ruby compatibility changes repeats.</div></div></div></div></section><section class=section id=findings><div class=section-header><h2>Key Findings</h2></div><div class=card><div class="key-finding narrative"><p><strong>Ownership concentration</strong>: 50% of files (23/46) are primarily owned by Rylan Collins. The tracing subsystem has a bus factor of 1 (Lenny Burdette owns 100% of proto.rb, 84% of node_map.rb, 54% of tracer.rb). 7 files are complete single-owner silos.</div><div class="key-finding narrative"><p><strong>Tracing subsystem fragility</strong>: lib/apollo-federation/tracing/tracer.rb is the most complex file (cognitive 52, cyclomatic 47) and has the highest sustained source-code churn (4 commits over 197 days). Commit messages reveal repeated breakage against graphql-ruby version changes, signaling fragile upstream coupling.</div><div class="key-finding narrative"><p><strong>Production code duplication -- missing abstractions</strong>: enum.rb, input_object.rb, scalar.rb, and union.rb are identical 23-line files (92 duplicated lines total). argument.rb and enum_value.rb are another identical pair (50 duplicated lines). These represent two missing shared modules.</div><div class="key-finding narrative"><p><strong>Test file duplication</strong>: All debt below grade A is concentrated in spec files. spec/apollo-federation/service_field_v2_spec.rb is the worst file in the codebase (grade C+, score 77.6) with 49.7% duplication and cyclomatic complexity of 56.</div><div class="key-finding narrative"><p><strong>Stale technical debt</strong>: 6 of 8 SATD items are over 3 years old. 4 TODOs cluster in entities_field.rb around unresolved design questions about type lookup, error handling, and interface key support. At least 2 TODOs (any.rb line 10, entities_field.rb line 41) are fully stale and should be removed.</div><div class="key-finding narrative"><p><strong>Cohesion is the weakest metric</strong>: Scored 67/100 with a declining trend (slope -0.29). 48 of 74 classes have LCOM violations. FederatedDocumentFromSchemaDefinition (LCOM 15, 16 methods, 1 shared field) is the strongest candidate for decomposition.</div><div class="key-finding narrative"><p><strong>Test coverage gaps in central modules</strong>: lib/apollo-federation/has_directives.rb (9 dependents, highest PageRank) has no dedicated spec. lib/apollo-federation/entity.rb and lib/apollo-federation/federated_document_from_schema_definition.rb also lack direct test files.</div><div class="key-finding narrative"><p><strong>Zero architectural smells</strong>: No cyclic dependencies, no hub modules, no central connectors. The dependency graph is clean with 46 nodes, 73 edges, and balanced instability (avg 0.44).</div></div></section><section class=section id=cohesion><div class=section-header><h2>Low Cohesion Classes</h2></div><p class=section-subtitle>Classes doing too many unrelated things - candidates for splitting<div class=card style=margin-bottom:1.5rem><div class=narrative><p>The weakest component at 67/100, with a slight declining trend (69 to 67, slope -0.29). 48 out of 74 classes have LCOM violations. The worst offenders are FederatedDocumentFromSchemaDefinition (LCOM 15, 16 methods sharing only 1 field) and the Tracer classes (LCOM 13, 13 methods sharing 0 fields). The Object module (LCOM 8, 8 methods, 1 field) and Schema module (LCOM 8, 11 methods, 4 fields) also contribute. Many LCOM violations stem from Ruby's module/mixin pattern where methods are defined without direct field access, inflating LCOM artificially. However, FederatedDocumentFromSchemaDefinition is a genuine candidate for decomposition given its 16 methods and single shared field.</div></div><div class=table-container><table id=cohesion-table><thead><tr><th>Class<th>File<th>Language<th><span data-tooltip="Lack of Cohesion of Methods. Higher values indicate a class is doing too many unrelated things and should be split." class=tooltip>LCOM</span><th><span data-tooltip="Weighted Methods per Class. Sum of complexity of all methods. High values indicate overly complex classes." class=tooltip>WMC</span><th><span data-tooltip="Coupling Between Objects. Number of classes this class depends on. High coupling makes changes risky." class=tooltip>CBO</span></thead></table><script>window.__td_cohesion=[[`<code>ApolloFederation</code>`,`...ed_document_from_schema_definition.rb`,`Ruby`,`<span class="badge medium">15</span>`,`26`,`19`],[`<code>FederatedDocumentFromSchemaDefinition</code>`,`...ed_document_from_schema_definition.rb`,`Ruby`,`<span class="badge medium">15</span>`,`26`,`19`],[`<code>ApolloFederation</code>`,`lib/apollo-federation/tracing/tracer.rb`,`Ruby`,`<span class="badge medium">13</span>`,`26`,`21`],[`<code>Tracing</code>`,`lib/apollo-federation/tracing/tracer.rb`,`Ruby`,`<span class="badge medium">13</span>`,`26`,`21`],[`<code>Tracer</code>`,`lib/apollo-federation/tracing/tracer.rb`,`Ruby`,`<span class="badge medium">13</span>`,`26`,`21`],[`<code>ApolloFederation</code>`,`lib/apollo-federation/object.rb`,`Ruby`,`<span class="badge medium">8</span>`,`12`,`5`],[`<code>Object</code>`,`lib/apollo-federation/object.rb`,`Ruby`,`<span class="badge medium">8</span>`,`12`,`5`],[`<code>ApolloFederation</code>`,`lib/apollo-federation/schema.rb`,`Ruby`,`<span class="badge medium">8</span>`,`16`,`19`],[`<code>Schema</code>`,`lib/apollo-federation/schema.rb`,`Ruby`,`<span class="badge medium">8</span>`,`16`,`19`],[`<code>ClassMethods</code>`,`lib/apollo-federation/object.rb`,`Ruby`,`<span class="badge medium">7</span>`,`11`,`5`],[`<code>CommonMethods</code>`,`lib/apollo-federation/schema.rb`,`Ruby`,`<span class="badge medium">7</span>`,`15`,`19`],[`<code>ApolloFederation</code>`,`.../apollo-federation/tracing/node_map.rb`,`Ruby`,`<span class="badge medium">6</span>`,`8`,`11`],[`<code>Tracing</code>`,`.../apollo-federation/tracing/node_map.rb`,`Ruby`,`<span class="badge medium">6</span>`,`8`,`11`],[`<code>NodeMap</code>`,`.../apollo-federation/tracing/node_map.rb`,`Ruby`,`<span class="badge medium">6</span>`,`8`,`11`],[`<code>ApolloFederation</code>`,`lib/apollo-federation/interface.rb`,`Ruby`,`<span class="badge medium">5</span>`,`5`,`6`],[`<code>Interface</code>`,`lib/apollo-federation/interface.rb`,`Ruby`,`<span class="badge medium">5</span>`,`5`,`6`],[`<code>ApolloFederation</code>`,`lib/apollo-federation/entities_field.rb`,`Ruby`,`<span class="badge medium">4</span>`,`13`,`25`],[`<code>EntitiesField</code>`,`lib/apollo-federation/entities_field.rb`,`Ruby`,`<span class="badge medium">4</span>`,`13`,`24`],[`<code>DefinitionMethods</code>`,`lib/apollo-federation/interface.rb`,`Ruby`,`<span class="badge medium">4</span>`,`4`,`5`],[`<code>GraphQLServer</code>`,`example/graphql_server.rb`,`Ruby`,`<span class="badge medium">3</span>`,`7`,`13`],[`<code>ApolloFederation</code>`,`lib/apollo-federation/enum.rb`,`Ruby`,`<span class="badge medium">3</span>`,`3`,`4`],[`<code>Enum</code>`,`lib/apollo-federation/enum.rb`,`Ruby`,`<span class="badge medium">3</span>`,`3`,`3`],[`<code>ApolloFederation</code>`,`lib/apollo-federation/field.rb`,`Ruby`,`<span class="badge medium">3</span>`,`15`,`7`],[`<code>Field</code>`,`lib/apollo-federation/field.rb`,`Ruby`,`<span class="badge medium">3</span>`,`15`,`7`],[`<code>ApolloFederation</code>`,`lib/apollo-federation/has_directives.rb`,`Ruby`,`<span class="badge medium">3</span>`,`5`,`3`],[`<code>HasDirectives</code>`,`lib/apollo-federation/has_directives.rb`,`Ruby`,`<span class="badge medium">3</span>`,`5`,`2`],[`<code>ApolloFederation</code>`,`lib/apollo-federation/input_object.rb`,`Ruby`,`<span class="badge medium">3</span>`,`3`,`4`],[`<code>InputObject</code>`,`lib/apollo-federation/input_object.rb`,`Ruby`,`<span class="badge medium">3</span>`,`3`,`3`],[`<code>ApolloFederation</code>`,`lib/apollo-federation/scalar.rb`,`Ruby`,`<span class="badge medium">3</span>`,`3`,`4`],[`<code>Scalar</code>`,`lib/apollo-federation/scalar.rb`,`Ruby`,`<span class="badge medium">3</span>`,`3`,`3`],[`<code>ApolloFederation</code>`,`lib/apollo-federation/service_field.rb`,`Ruby`,`<span class="badge medium">3</span>`,`3`,`11`],[`<code>ServiceField</code>`,`lib/apollo-federation/service_field.rb`,`Ruby`,`<span class="badge medium">3</span>`,`3`,`10`],[`<code>ApolloFederation</code>`,`lib/apollo-federation/tracing.rb`,`Ruby`,`<span class="badge medium">3</span>`,`3`,`5`],[`<code>Tracing</code>`,`lib/apollo-federation/tracing.rb`,`Ruby`,`<span class="badge medium">3</span>`,`3`,`5`],[`<code>ApolloFederation</code>`,`lib/apollo-federation/union.rb`,`Ruby`,`<span class="badge medium">3</span>`,`3`,`4`],[`<code>Union</code>`,`lib/apollo-federation/union.rb`,`Ruby`,`<span class="badge medium">3</span>`,`3`,`3`],[`<code>Product</code>`,`example/inventory.rb`,`Ruby`,`<span class="badge medium">2</span>`,`4`,`3`],[`<code>User</code>`,`example/reviews.rb`,`Ruby`,`<span class="badge medium">2</span>`,`2`,`3`],[`<code>ApolloFederation</code>`,`lib/apollo-federation/argument.rb`,`Ruby`,`<span class="badge medium">2</span>`,`3`,`4`],[`<code>Argument</code>`,`lib/apollo-federation/argument.rb`,`Ruby`,`<span class="badge medium">2</span>`,`3`,`3`],[`<code>ClassMethods</code>`,`lib/apollo-federation/enum.rb`,`Ruby`,`<span class="badge medium">2</span>`,`2`,`2`],[`<code>ApolloFederation</code>`,`lib/apollo-federation/enum_value.rb`,`Ruby`,`<span class="badge medium">2</span>`,`3`,`4`],[`<code>EnumValue</code>`,`lib/apollo-federation/enum_value.rb`,`Ruby`,`<span class="badge medium">2</span>`,`3`,`3`],[`<code>ApolloFederation</code>`,`.../lo-federation/field_set_serializer.rb`,`Ruby`,`<span class="badge medium">2</span>`,`2`,`13`],[`<code>FieldSetSerializer</code>`,`.../lo-federation/field_set_serializer.rb`,`Ruby`,`<span class="badge medium">2</span>`,`2`,`12`],[`<code>ClassMethods</code>`,`lib/apollo-federation/input_object.rb`,`Ruby`,`<span class="badge medium">2</span>`,`2`,`2`],[`<code>ClassMethods</code>`,`lib/apollo-federation/scalar.rb`,`Ruby`,`<span class="badge medium">2</span>`,`2`,`2`],[`<code>ClassMethods</code>`,`lib/apollo-federation/union.rb`,`Ruby`,`<span class="badge medium">2</span>`,`2`,`2`],[`<code>User</code>`,`example/accounts.rb`,`Ruby`,`<span class="badge medium">1</span>`,`1`,`2`],[`<code>Query</code>`,`example/accounts.rb`,`Ruby`,`<span class="badge medium">1</span>`,`1`,`3`],[`<code>Product</code>`,`example/products.rb`,`Ruby`,`<span class="badge medium">1</span>`,`1`,`3`],[`<code>Query</code>`,`example/products.rb`,`Ruby`,`<span class="badge medium">1</span>`,`1`,`4`],[`<code>Review</code>`,`example/reviews.rb`,`Ruby`,`<span class="badge medium">1</span>`,`1`,`2`],[`<code>Product</code>`,`example/reviews.rb`,`Ruby`,`<span class="badge medium">1</span>`,`1`,`3`],[`<code>ApolloFederation</code>`,`lib/apollo-federation/any.rb`,`Ruby`,`<span class="badge medium">1</span>`,`1`,`7`],[`<code>Any</code>`,`lib/apollo-federation/any.rb`,`Ruby`,`<span class="badge medium">1</span>`,`1`,`6`],[`<code>ClassMethods</code>`,`lib/apollo-federation/entities_field.rb`,`Ruby`,`<span class="badge medium">1</span>`,`2`,`11`],[`<code>ApolloFederation</code>`,`lib/apollo-federation/entity.rb`,`Ruby`,`<span class="badge medium">1</span>`,`1`,`7`],[`<code>Entity</code>`,`lib/apollo-federation/entity.rb`,`Ruby`,`<span class="badge medium">1</span>`,`1`,`6`],[`<code>ClassMethods</code>`,`lib/apollo-federation/service_field.rb`,`Ruby`,`<span class="badge medium">1</span>`,`1`,`9`],[`<code>AccountSchema</code>`,`example/accounts.rb`,`Ruby`,`<span class="badge medium">0</span>`,`0`,`22`],[`<code>BaseField</code>`,`example/graphql_server.rb`,`Ruby`,`<span class="badge medium">0</span>`,`0`,`8`],[`<code>BaseObject</code>`,`example/graphql_server.rb`,`Ruby`,`<span class="badge medium">0</span>`,`0`,`8`],[`<code>InventorySchema</code>`,`example/inventory.rb`,`Ruby`,`<span class="badge medium">0</span>`,`0`,`22`],[`<code>ProductSchema</code>`,`example/products.rb`,`Ruby`,`<span class="badge medium">0</span>`,`0`,`22`],[`<code>ReviewSchema</code>`,`example/reviews.rb`,`Ruby`,`<span class="badge medium">0</span>`,`0`,`24`],[`<code>ApolloFederation</code>`,`lib/apollo-federation/service.rb`,`Ruby`,`<span class="badge medium">0</span>`,`0`,`6`],[`<code>Service</code>`,`lib/apollo-federation/service.rb`,`Ruby`,`<span class="badge medium">0</span>`,`0`,`5`],[`<code>Mdg</code>`,`.../federation/tracing/proto/apollo_pb.rb`,`Ruby`,`<span class="badge medium">0</span>`,`0`,`55`],[`<code>Engine</code>`,`.../federation/tracing/proto/apollo_pb.rb`,`Ruby`,`<span class="badge medium">0</span>`,`0`,`54`],[`<code>Proto</code>`,`.../federation/tracing/proto/apollo_pb.rb`,`Ruby`,`<span class="badge medium">0</span>`,`0`,`53`],[`<code>ApolloFederation</code>`,`lib/apollo-federation/tracing/proto.rb`,`Ruby`,`<span class="badge medium">0</span>`,`0`,`9`],[`<code>Tracing</code>`,`lib/apollo-federation/tracing/proto.rb`,`Ruby`,`<span class="badge medium">0</span>`,`0`,`8`],[`<code>ApolloFederation</code>`,`lib/apollo-federation/version.rb`,`Ruby`,`<span class="badge medium">0</span>`,`0`,`1`]]</script></div></section><section class=section id=dependencies><div class=section-header><h2>Dependency Structure</h2></div><p class=section-subtitle>Import graph analysis - cycles, bottlenecks, and instability<div class=card style=margin-bottom:1.5rem><div class=narrative><p>The dependency graph is structurally healthy: 46 nodes, 73 edges, and zero import cycles. The most central file by PageRank is lib/apollo-federation/has_directives.rb (PageRank 0.033, in-degree 9, out-degree 0). It is a pure dependency sink used by 9 GraphQL type modules (object, interface, field, enum, enum_value, scalar, union, input_object, argument) and has no outgoing dependencies, which is the correct posture for a foundational module. However, no spec file directly targets has_directives.rb -- it is only tested indirectly through its consumers. Given its centrality, a dedicated spec would reduce risk. The highest betweenness node is lib/apollo-federation.rb (betweenness 0.070), which also has the highest fan-out at 15 outgoing edges against only 2 incoming edges (instability 0.88). This is expected for a top-level entry point that re-exports the library, but any change to its require list ripples across the entire graph. lib/apollo-federation/schema.rb is the second most structurally important library file (betweenness 0.028, in-degree 5, out-degree 3) and acts as the bridge between the schema definition layer (entities_field, service_field, entity) and the rest of the library; it is well-covered by schema_spec, entities_field_spec, and both service_field specs. lib/apollo-federation/field_set_serializer.rb (in-degree 4, PageRank 0.012) is a second foundational sink depended on by object, interface, and field, and it does have a dedicated spec. Two library files lack any direct test coverage: lib/apollo-federation/entity.rb and lib/apollo-federation/federated_document_from_schema_definition.rb. entity.rb is only reachable through schema.rb and federated_document_from_schema_definition.rb is an isolated leaf with zero in-degree -- neither has a corresponding spec file. The example/ subtree is cleanly isolated behind example/graphql_server.rb (betweenness 0.048), which funnels all four example services into the library via a single edge to lib/apollo-federation.rb. No structural actions are urgently needed, but adding targeted specs for has_directives.rb, entity.rb, and federated_document_from_schema_definition.rb would harden the most central and least-tested parts of the graph.</div></div><div class=stat-grid><div class=stat-box><div class=value>46</div><div class=label>Modules</div></div><div class=stat-box><div class=value>73</div><div class=label>Dependencies</div></div><div class=stat-box><div class=value>3.2</div><div class=label><span data-tooltip="Average number of imports + importers per file. Higher means more interconnected." class=tooltip>Avg Degree</span></div></div><div class=stat-box><div class=value style=color:var(--accent-green)>0</div><div class=label><span data-tooltip="Strongly connected components with more than one node. Each cycle is a group of files that all depend on each other." class=tooltip>Dependency Cycles</span></div></div></div><div class=table-container><table id=graph-table><thead><tr><th>File<th>Lang<th><span data-tooltip="Relative importance in the dependency graph. Higher PageRank = more other files depend on this (directly or transitively)." class=tooltip>PageRank</span><th><span data-tooltip="How often this file sits on the shortest path between other files. High betweenness = bottleneck." class=tooltip>Betweenness</span><th><span data-tooltip="Number of files that import this file." class=tooltip>In</span><th><span data-tooltip="Number of files this file imports." class=tooltip>Out</span><th><span data-tooltip="Ratio of outgoing to total dependencies. 0 = maximally stable (many dependents), 1 = maximally unstable. Stable modules depending on unstable ones is a smell." class=tooltip>Instability</span></thead></table><script>window.__td_graph=[[`<code>lib/apollo-federation/has_directives.rb</code>`,`Ruby`,`0.0334`,`0.0000`,`9`,`0`,`<span class="good">0.00</span>`],[`<code>lib/apollo-federation.rb</code>`,`Ruby`,`0.0168`,`0.0697`,`2`,`15`,`<span class="danger">0.88</span>`],[`<code>example/graphql_server.rb</code>`,`Ruby`,`0.0143`,`0.0485`,`4`,`1`,`<span class="good">0.20</span>`],[`<code>lib/apollo-federation/field_set_serializer.rb</code>`,`Ruby`,`0.0120`,`0.0000`,`4`,`0`,`<span class="good">0.00</span>`],[`<code>spec/spec_helper.rb</code>`,`Ruby`,`0.0112`,`0.0000`,`8`,`0`,`<span class="good">0.00</span>`],[`<code>lib/apollo-federation/tracing/proto/apollo_pb.rb</code>`,`Ruby`,`0.0109`,`0.0000`,`1`,`0`,`<span class="good">0.00</span>`],[`<code>lib/apollo-federation/service.rb</code>`,`Ruby`,`0.0104`,`0.0000`,`2`,`0`,`<span class="good">0.00</span>`],[`<code>lib/apollo-federation/any.rb</code>`,`Ruby`,`0.0090`,`0.0000`,`2`,`0`,`<span class="good">0.00</span>`],[`<code>lib/apollo-federation/tracing/proto.rb</code>`,`Ruby`,`0.0090`,`0.0045`,`2`,`1`,`<span class="warning">0.33</span>`],[`<code>lib/apollo-federation/version.rb</code>`,`Ruby`,`0.0070`,`0.0000`,`2`,`0`,`<span class="good">0.00</span>`],[`<code>lib/apollo-federation/object.rb</code>`,`Ruby`,`0.0066`,`0.0036`,`5`,`2`,`<span class="good">0.29</span>`],[`<code>lib/apollo-federation/schema.rb</code>`,`Ruby`,`0.0066`,`0.0278`,`5`,`3`,`<span class="warning">0.38</span>`],[`<code>example/gateway.js</code>`,`JavaScript`,`0.0060`,`0.0000`,`1`,`0`,`<span class="good">0.00</span>`],[`<code>lib/apollo-federation/field.rb</code>`,`Ruby`,`0.0057`,`0.0026`,`4`,`2`,`<span class="warning">0.33</span>`],[`<code>lib/apollo-federation/tracing/node_map.rb</code>`,`Ruby`,`0.0056`,`0.0010`,`2`,`1`,`<span class="warning">0.33</span>`],[`<code>lib/apollo-federation/entity.rb</code>`,`Ruby`,`0.0051`,`0.0000`,`1`,`0`,`<span class="good">0.00</span>`],[`<code>lib/apollo-federation/service_field.rb</code>`,`Ruby`,`0.0051`,`0.0061`,`1`,`1`,`<span class="warning">0.50</span>`],[`<code>lib/apollo-federation/entities_field.rb</code>`,`Ruby`,`0.0051`,`0.0061`,`1`,`1`,`<span class="warning">0.50</span>`],[`<code>lib/apollo-federation/interface.rb</code>`,`Ruby`,`0.0050`,`0.0021`,`3`,`2`,`<span class="warning">0.40</span>`],[`<code>lib/apollo-federation/enum_value.rb</code>`,`Ruby`,`0.0045`,`0.0004`,`2`,`1`,`<span class="warning">0.33</span>`],[`<code>lib/apollo-federation/argument.rb</code>`,`Ruby`,`0.0045`,`0.0004`,`2`,`1`,`<span class="warning">0.33</span>`],[`<code>lib/apollo-federation/enum.rb</code>`,`Ruby`,`0.0045`,`0.0004`,`2`,`1`,`<span class="warning">0.33</span>`],[`<code>lib/apollo-federation/scalar.rb</code>`,`Ruby`,`0.0045`,`0.0004`,`2`,`1`,`<span class="warning">0.33</span>`],[`<code>lib/apollo-federation/union.rb</code>`,`Ruby`,`0.0045`,`0.0004`,`2`,`1`,`<span class="warning">0.33</span>`],[`<code>lib/apollo-federation/input_object.rb</code>`,`Ruby`,`0.0045`,`0.0004`,`2`,`1`,`<span class="warning">0.33</span>`],[`<code>lib/apollo-federation/tracing/tracer.rb</code>`,`Ruby`,`0.0042`,`0.0000`,`1`,`0`,`<span class="good">0.00</span>`],[`<code>lib/apollo-federation/tracing.rb</code>`,`Ruby`,`0.0042`,`0.0000`,`1`,`0`,`<span class="good">0.00</span>`],[`<code>release.config.js</code>`,`JavaScript`,`0.0033`,`0.0000`,`0`,`0`,`<span class="good">0.00</span>`],[`<code>spec/apollo-federation/service_field_v1_spec.rb</code>`,`Ruby`,`0.0033`,`0.0000`,`0`,`5`,`<span class="danger">1.00</span>`],[`<code>spec/apollo-federation/tracing_spec.rb</code>`,`Ruby`,`0.0033`,`0.0000`,`0`,`2`,`<span class="danger">1.00</span>`],[`<code>spec/apollo-federation/any_spec.rb</code>`,`Ruby`,`0.0033`,`0.0000`,`0`,`2`,`<span class="danger">1.00</span>`],[`<code>spec/apollo-federation/entities_field_spec.rb</code>`,`Ruby`,`0.0033`,`0.0000`,`0`,`4`,`<span class="danger">1.00</span>`],[`<code>.../on/federated_document_from_schema_definition.rb</code>`,`Ruby`,`0.0033`,`0.0000`,`0`,`1`,`<span class="danger">1.00</span>`],[`<code>...//apollo-federation/field_set_serializer_spec.rb</code>`,`Ruby`,`0.0033`,`0.0000`,`0`,`2`,`<span class="danger">1.00</span>`],[`<code>example/accounts.rb</code>`,`Ruby`,`0.0033`,`0.0000`,`0`,`1`,`<span class="danger">1.00</span>`],[`<code>apollo-federation.gemspec</code>`,`Ruby`,`0.0033`,`0.0000`,`0`,`1`,`<span class="danger">1.00</span>`],[`<code>jest.config.js</code>`,`JavaScript`,`0.0033`,`0.0000`,`0`,`0`,`<span class="good">0.00</span>`],[`<code>spec/apollo-federation/service_field_v2_spec.rb</code>`,`Ruby`,`0.0033`,`0.0000`,`0`,`11`,`<span class="danger">1.00</span>`],[`<code>example/reviews.rb</code>`,`Ruby`,`0.0033`,`0.0000`,`0`,`1`,`<span class="danger">1.00</span>`],[`<code>spec/integration/integration.test.js</code>`,`JavaScript`,`0.0033`,`0.0000`,`0`,`1`,`<span class="danger">1.00</span>`],[`<code>example/inventory.rb</code>`,`Ruby`,`0.0033`,`0.0000`,`0`,`1`,`<span class="danger">1.00</span>`],[`<code>spec/apollo-federation/schema_spec.rb</code>`,`Ruby`,`0.0033`,`0.0000`,`0`,`3`,`<span class="danger">1.00</span>`],[`<code>babel.config.js</code>`,`JavaScript`,`0.0033`,`0.0000`,`0`,`0`,`<span class="good">0.00</span>`],[`<code>example/products.rb</code>`,`Ruby`,`0.0033`,`0.0000`,`0`,`1`,`<span class="danger">1.00</span>`],[`<code>bin/generate-protos.sh</code>`,`Bash`,`0.0033`,`0.0000`,`0`,`0`,`<span class="good">0.00</span>`],[`<code>spec/apollo-federation/tracing/node_map_spec.rb</code>`,`Ruby`,`0.0033`,`0.0000`,`0`,`2`,`<span class="danger">1.00</span>`]]</script></div></section><section class=section id=satd><div class=section-header><h2>Known Issues</h2></div><p class=section-subtitle>Problems the team has documented but not yet fixed (TODO, FIXME, HACK)<div class=card style=margin-bottom:1.5rem><div class=narrative><p>All 8 SATD items are TODOs (lowest severity), but 6 of 8 are over 3 years old, dating back to the project's earliest commits (2019-2020). The most concerning pattern is a cluster of 4 TODOs in entities_field.rb, the core entity resolution logic. Two of these (lines 41 and 49) question fundamental design decisions about type lookup and interface handling that were never resolved. The interface-related TODOs in entities_field.rb line 49 and schema.rb line 82 represent an acknowledged gap in federation spec compliance: interfaces with @key directives are silently ignored. The error handling TODO at entities_field.rb line 44 means entity resolution failures produce generic RuntimeErrors instead of catchable typed exceptions. Overall debt density is low (0.38) and the weighted count (2.0) is modest, but the age and clustering in entity resolution indicate these are abandoned questions rather than planned work.</div></div><div class=stat-grid><div class=stat-box><div class=value>8</div><div class=label>Total Issues</div></div><div class=stat-box><div class=value style=color:var(--accent-red)>0</div><div class=label>Critical</div></div><div class=stat-box><div class=value style=color:var(--accent-yellow)>0</div><div class=label>High</div></div><div class=stat-box><div class=value style=color:var(--accent-blue)>0</div><div class=label>Medium</div></div></div><div class=grid-2><div class=chart-container><h3>By Severity</h3><div class=chart-wrapper style=height:220px><div id=satdSeverityChart style=width:100%;height:220px></div></div></div><div class=chart-container><h3>By Category</h3><div class=chart-wrapper style=height:220px><div id=satdCategoryChart style=width:100%;height:220px></div></div></div></div><div class=table-container><table id=satd-table><thead><tr><th><span data-tooltip="Impact level based on marker type. FIXME/XXX are critical, TODO is high, HACK/TEMP are medium." class=tooltip>Severity</span><th><span data-tooltip="Type of technical debt: defect (bugs), design (architecture), requirement (missing features), etc." class=tooltip>Category</span><th>File<th>Lang<th>Line<th>Comment</thead></table><script>window.__td_satd=[[`<span class="badge low">low</span>`,`requirement`,`<code>apollo-federation.gemspec</code>`,`Ruby`,`44`,`# TODO: 3.4 need to explicit add mutex_m and ostruct`],[`<span class="badge low">low</span>`,`requirement`,`<code>lib/apollo-federation/any.rb</code>`,`Ruby`,`10`,`# TODO: Should we convert it to a Mash-like object?`],[`<span class="badge low">low</span>`,`requirement`,`<code>lib/apollo-federation/entities_field.rb</code>`,`Ruby`,`41`,`# TODO: Use warden or schema?`],[`<span class="badge low">low</span>`,`requirement`,`<code>lib/apollo-federation/entities_field.rb</code>`,`Ruby`,`44`,`# TODO: Raise a specific error class?`],[`<span class="badge low">low</span>`,`requirement`,`<code>lib/apollo-federation/entities_field.rb</code>`,`Ruby`,`49`,`# TODO: What if the type is an interface?`],[`<span class="badge low">low</span>`,`requirement`,`<code>lib/apollo-federation/entities_field.rb</code>`,`Ruby`,`71`,`# TODO: This isn't 100% correct: if (for some reason) 2 different resolve_reference`],[`<span class="badge low">low</span>`,`requirement`,`<code>lib/apollo-federation/schema.rb</code>`,`Ruby`,`82`,`# TODO: Interfaces can have a key...`],[`<span class="badge low">low</span>`,`requirement`,`<code>lib/apollo-federation/schema.rb</code>`,`Ruby`,`99`,`# TODO: Maybe the name should inherit from the original Query name`]]</script></div></section><section class=section id=duplicates><div class=section-header><h2>Duplicated Code</h2></div><p class=section-subtitle>Code that appears in multiple places - bugs fixed in one spot may need fixing elsewhere<div class=card style=margin-bottom:1.5rem><div class=narrative><p>Overall duplication is low at 4.1% (258 duplicated lines across 6,339 total), but the duplication that exists is structurally significant -- it reveals two missing abstractions in the production code.<p>[Group 5 -- 4 identical files, 92 total duplicated lines] The files enum.rb, input_object.rb, scalar.rb, and union.rb are byte-for-byte identical (23 lines each). Each defines a module with the same self.included hook, the same ClassMethods block including HasDirectives, and the same tag/inaccessible directive methods. The only difference across files is the module name. This is a textbook case for a shared mixin. Extract a common module (e.g., ApolloFederation::HasTagAndInaccessible or ApolloFederation::DirectiveType) that provides the ClassMethods with tag() and inaccessible(), then have each of these four modules simply include it. This would eliminate roughly 69 lines (3 of the 4 copies) and, more importantly, ensure that any future directive additions only need to be made in one place.<p>[Groups 1 and 3 -- argument.rb and enum_value.rb, 50 total duplicated lines] These two files are entirely identical: same initialize method that strips custom kwargs and calls super, same add_v2_directives private method. They share a different pattern from Group 5 (instance-level mixin with constructor override vs. class-level extension), but the logic is the same. Extract a shared module (e.g., ApolloFederation::V2DirectiveInitializer) containing VERSION_2_DIRECTIVES, the initialize override, and add_v2_directives. Both Argument and EnumValue would then just include it. This eliminates roughly 25 lines and removes a real bug risk: if a new v2 directive is added to one file but not the other.<p>[Group 2 -- tracer.rb internal clone, 22 duplicated lines] The execute_field and execute_field_lazy instance methods (lines 53-75) are identical 11-line wrappers that delegate to their self-class-method counterparts with the same argument unpacking. This is a minor within-file clone driven by the graphql-ruby tracer API requiring separate methods for eager and lazy field execution. The delegation pattern is nearly identical. A small helper method could reduce this, but the benefit is marginal given it is a single file and the methods are intentionally parallel.<p>[Group 4 -- integration test clone, 94 lines, 73% similarity] Two test blocks in integration.test.js share the same structure: build a query, call executeOperation, assert no errors, and compare data. This is typical integration test boilerplate. The difference is only in the query content and expected data. A shared helper like assertQueryResult(gatewayServer, query, expectedData) could reduce this, but test readability often benefits from explicitness, so this is low priority.<p>Recommended actions in priority order: (1) Extract a shared directive-type mixin to deduplicate enum.rb, input_object.rb, scalar.rb, and union.rb -- highest impact at 69 lines saved and 4 files that currently must be kept in sync manually. (2) Extract a shared v2 directive initializer module for argument.rb and enum_value.rb -- 25 lines saved and eliminates a likely source of divergence bugs. (3) The tracer.rb and test file clones are low risk and can be left as-is.</div></div><div class=stat-grid><div class=stat-box><div class=value style=color:var(--accent-green)>4.1%</div><div class=label>Duplication Rate</div></div><div class=stat-box><div class=value>5</div><div class=label>Clone Groups</div></div><div class=stat-box><div class=value>258</div><div class=label>Duplicate Lines</div></div><div class=stat-box><div class=value>6339</div><div class=label>Total Lines</div></div></div><div class=chart-container><h3>Duplication Level</h3><div id=duplicationGauge style=width:100%;height:250px></div></div></section><section class=section id=tdg><div class=section-header><h2>Technical Debt Gradient</h2></div><p class=section-subtitle>Per-file debt scores - prioritize cleanup where it matters most<div class=card style=margin-bottom:1.5rem><div class=narrative><p>The codebase is in excellent health. Of 46 files, 37 score A and 4 score A-, meaning 89% of the codebase carries no meaningful technical debt. The grade distribution has no D or F grades, and there are zero critical defects across all files.<p>The only dimension driving debt is code duplication, which is the sole penalty source in nearly every penalized file. There is no multi-dimensional compounding -- only one file (spec/apollo-federation/service_field_v2_spec.rb, grade C+) is penalized on two dimensions simultaneously.<p>Worst files by grade:<ol><li><p>spec/apollo-federation/service_field_v2_spec.rb (C+, score 77.6) -- The only file below B. It compounds high cyclomatic complexity (56) with severe duplication (49.7%). This is the single file most worth refactoring: extract shared test setup and repeated assertion patterns to reduce both duplication and structural complexity.</p><li><p>spec/apollo-federation/tracing_spec.rb (B, score 86.0) -- Deep nesting (7 levels) combined with 30.2% duplication. Flatten nested describe/context blocks and extract shared examples.</p><li><p>spec/apollo-federation/service_field_v1_spec.rb (B+, score 87.9) -- 35.3% duplication. Likely shares duplicated patterns with the v2 spec above; consider shared spec helpers between v1 and v2.</p><li><p>spec/apollo-federation/schema_spec.rb (B+, score 89.6) -- 27.1% duplication.</p><li><p>spec/apollo-federation/entities_field_spec.rb (B+, score 89.7) -- 26.3% duplication.</p></ol><p>All debt is concentrated in test files under spec/. The library source code (lib/) is nearly pristine -- only lib/apollo-federation/field.rb and lib/apollo-federation/tracing/tracer.rb carry minor duplication penalties (~10%), both still grading A-. No production code file scores below A-.<p>Key takeaway: duplication in test files is the only systemic pattern. The highest-impact action is refactoring spec/apollo-federation/service_field_v2_spec.rb by extracting shared test contexts and reducing nested complexity. Addressing the duplication across the service_field v1/v2 specs together would likely lift both files significantly.</div></div><div class=stat-grid><div class=stat-box><div class=value>46</div><div class=label>Files Scored</div></div><div class=stat-box><div class="value good">93.7</div><div class=label>Average Score</div></div><div class=stat-box><div class="value good">A</div><div class=label>Average Grade</div></div><div class=stat-box><div class=value style=color:var(--accent-red)>0</div><div class=label>Failing Files</div></div></div><div class=chart-container style=margin-bottom:1.5rem><h3>Grade Distribution</h3><div class=chart-wrapper style=height:220px><div id=tdgGradeChart style=width:100%;height:220px></div></div></div><div class=table-container><table id=tdg-table><thead><tr><th>File<th>Lang<th><span data-tooltip="Overall debt score (0-100). Higher is better. Below 60 is failing." class=tooltip>Score</span><th>Grade<th><span data-tooltip="Cyclomatic complexity contribution (0-20)." class=tooltip>Structural</span><th><span data-tooltip="Nesting depth contribution (0-15)." class=tooltip>Semantic</span><th><span data-tooltip="Code duplication ratio contribution (0-15)." class=tooltip>Duplication</span><th><span data-tooltip="Import count contribution (0-15)." class=tooltip>Coupling</span></thead></table><script>window.__td_tdg=[[`<code>spec/apollo-federation/service_field_v2_spec.rb</code>`,`Ruby`,`<span class="warning">77.6</span>`,`<span class="badge warning">C+</span>`,`12.5`,`15.0`,`5.1`,`15.0`],[`<code>spec/apollo-federation/tracing_spec.rb</code>`,`Ruby`,`<span class="good">86.0</span>`,`<span class="badge good">B</span>`,`20.0`,`12.0`,`9.0`,`15.0`],[`<code>spec/apollo-federation/service_field_v1_spec.rb</code>`,`Ruby`,`<span class="good">87.9</span>`,`<span class="badge good">B+</span>`,`20.0`,`15.0`,`7.9`,`15.0`],[`<code>spec/apollo-federation/schema_spec.rb</code>`,`Ruby`,`<span class="good">89.6</span>`,`<span class="badge good">B+</span>`,`20.0`,`15.0`,`9.6`,`15.0`],[`<code>spec/apollo-federation/entities_field_spec.rb</code>`,`Ruby`,`<span class="good">89.7</span>`,`<span class="badge good">B+</span>`,`20.0`,`15.0`,`9.7`,`15.0`],[`<code>spec/apollo-federation/tracing/node_map_spec.rb</code>`,`Ruby`,`<span class="good">90.4</span>`,`<span class="badge good">A-</span>`,`20.0`,`15.0`,`10.4`,`15.0`],[`<code>...//apollo-federation/field_set_serializer_spec.rb</code>`,`Ruby`,`<span class="good">91.4</span>`,`<span class="badge good">A-</span>`,`20.0`,`15.0`,`11.4`,`15.0`],[`<code>lib/apollo-federation/field.rb</code>`,`Ruby`,`<span class="good">92.9</span>`,`<span class="badge good">A-</span>`,`20.0`,`15.0`,`12.9`,`15.0`],[`<code>lib/apollo-federation/tracing/tracer.rb</code>`,`Ruby`,`<span class="good">93.0</span>`,`<span class="badge good">A-</span>`,`20.0`,`15.0`,`13.0`,`15.0`],[`<code>spec/integration/integration.test.js</code>`,`JavaScript`,`<span class="good">93.0</span>`,`<span class="badge good">A</span>`,`20.0`,`13.0`,`15.0`,`15.0`],[`<code>apollo-federation.gemspec</code>`,`Ruby`,`<span class="good">95.0</span>`,`<span class="badge good">A</span>`,`20.0`,`15.0`,`15.0`,`15.0`],[`<code>babel.config.js</code>`,`JavaScript`,`<span class="good">95.0</span>`,`<span class="badge good">A</span>`,`20.0`,`15.0`,`15.0`,`15.0`],[`<code>bin/generate-protos.sh</code>`,`Bash`,`<span class="good">95.0</span>`,`<span class="badge good">A</span>`,`20.0`,`15.0`,`15.0`,`15.0`],[`<code>example/accounts.rb</code>`,`Ruby`,`<span class="good">95.0</span>`,`<span class="badge good">A</span>`,`20.0`,`15.0`,`15.0`,`15.0`],[`<code>example/gateway.js</code>`,`JavaScript`,`<span class="good">95.0</span>`,`<span class="badge good">A</span>`,`20.0`,`15.0`,`15.0`,`15.0`],[`<code>example/graphql_server.rb</code>`,`Ruby`,`<span class="good">95.0</span>`,`<span class="badge good">A</span>`,`20.0`,`15.0`,`15.0`,`15.0`],[`<code>example/inventory.rb</code>`,`Ruby`,`<span class="good">95.0</span>`,`<span class="badge good">A</span>`,`20.0`,`15.0`,`15.0`,`15.0`],[`<code>example/products.rb</code>`,`Ruby`,`<span class="good">95.0</span>`,`<span class="badge good">A</span>`,`20.0`,`15.0`,`15.0`,`15.0`],[`<code>example/reviews.rb</code>`,`Ruby`,`<span class="good">95.0</span>`,`<span class="badge good">A</span>`,`20.0`,`15.0`,`15.0`,`15.0`],[`<code>jest.config.js</code>`,`JavaScript`,`<span class="good">95.0</span>`,`<span class="badge good">A</span>`,`20.0`,`15.0`,`15.0`,`15.0`],[`<code>lib/apollo-federation/any.rb</code>`,`Ruby`,`<span class="good">95.0</span>`,`<span class="badge good">A</span>`,`20.0`,`15.0`,`15.0`,`15.0`],[`<code>lib/apollo-federation/argument.rb</code>`,`Ruby`,`<span class="good">95.0</span>`,`<span class="badge good">A</span>`,`20.0`,`15.0`,`15.0`,`15.0`],[`<code>lib/apollo-federation/entities_field.rb</code>`,`Ruby`,`<span class="good">95.0</span>`,`<span class="badge good">A</span>`,`20.0`,`15.0`,`15.0`,`15.0`],[`<code>lib/apollo-federation/entity.rb</code>`,`Ruby`,`<span class="good">95.0</span>`,`<span class="badge good">A</span>`,`20.0`,`15.0`,`15.0`,`15.0`],[`<code>lib/apollo-federation/enum.rb</code>`,`Ruby`,`<span class="good">95.0</span>`,`<span class="badge good">A</span>`,`20.0`,`15.0`,`15.0`,`15.0`],[`<code>lib/apollo-federation/enum_value.rb</code>`,`Ruby`,`<span class="good">95.0</span>`,`<span class="badge good">A</span>`,`20.0`,`15.0`,`15.0`,`15.0`],[`<code>.../on/federated_document_from_schema_definition.rb</code>`,`Ruby`,`<span class="good">95.0</span>`,`<span class="badge good">A</span>`,`20.0`,`15.0`,`15.0`,`15.0`],[`<code>lib/apollo-federation/field_set_serializer.rb</code>`,`Ruby`,`<span class="good">95.0</span>`,`<span class="badge good">A</span>`,`20.0`,`15.0`,`15.0`,`15.0`],[`<code>lib/apollo-federation/has_directives.rb</code>`,`Ruby`,`<span class="good">95.0</span>`,`<span class="badge good">A</span>`,`20.0`,`15.0`,`15.0`,`15.0`],[`<code>lib/apollo-federation/input_object.rb</code>`,`Ruby`,`<span class="good">95.0</span>`,`<span class="badge good">A</span>`,`20.0`,`15.0`,`15.0`,`15.0`],[`<code>lib/apollo-federation/interface.rb</code>`,`Ruby`,`<span class="good">95.0</span>`,`<span class="badge good">A</span>`,`20.0`,`15.0`,`15.0`,`15.0`],[`<code>lib/apollo-federation/object.rb</code>`,`Ruby`,`<span class="good">95.0</span>`,`<span class="badge good">A</span>`,`20.0`,`15.0`,`15.0`,`15.0`],[`<code>lib/apollo-federation/scalar.rb</code>`,`Ruby`,`<span class="good">95.0</span>`,`<span class="badge good">A</span>`,`20.0`,`15.0`,`15.0`,`15.0`],[`<code>lib/apollo-federation/schema.rb</code>`,`Ruby`,`<span class="good">95.0</span>`,`<span class="badge good">A</span>`,`20.0`,`15.0`,`15.0`,`15.0`],[`<code>lib/apollo-federation/service.rb</code>`,`Ruby`,`<span class="good">95.0</span>`,`<span class="badge good">A</span>`,`20.0`,`15.0`,`15.0`,`15.0`],[`<code>lib/apollo-federation/service_field.rb</code>`,`Ruby`,`<span class="good">95.0</span>`,`<span class="badge good">A</span>`,`20.0`,`15.0`,`15.0`,`15.0`],[`<code>lib/apollo-federation/tracing/node_map.rb</code>`,`Ruby`,`<span class="good">95.0</span>`,`<span class="badge good">A</span>`,`20.0`,`15.0`,`15.0`,`15.0`],[`<code>lib/apollo-federation/tracing/proto/apollo_pb.rb</code>`,`Ruby`,`<span class="good">95.0</span>`,`<span class="badge good">A</span>`,`20.0`,`15.0`,`15.0`,`15.0`],[`<code>lib/apollo-federation/tracing/proto.rb</code>`,`Ruby`,`<span class="good">95.0</span>`,`<span class="badge good">A</span>`,`20.0`,`15.0`,`15.0`,`15.0`],[`<code>lib/apollo-federation/tracing.rb</code>`,`Ruby`,`<span class="good">95.0</span>`,`<span class="badge good">A</span>`,`20.0`,`15.0`,`15.0`,`15.0`],[`<code>lib/apollo-federation/union.rb</code>`,`Ruby`,`<span class="good">95.0</span>`,`<span class="badge good">A</span>`,`20.0`,`15.0`,`15.0`,`15.0`],[`<code>lib/apollo-federation/version.rb</code>`,`Ruby`,`<span class="good">95.0</span>`,`<span class="badge good">A</span>`,`20.0`,`15.0`,`15.0`,`15.0`],[`<code>lib/apollo-federation.rb</code>`,`Ruby`,`<span class="good">95.0</span>`,`<span class="badge good">A</span>`,`20.0`,`15.0`,`15.0`,`15.0`],[`<code>release.config.js</code>`,`JavaScript`,`<span class="good">95.0</span>`,`<span class="badge good">A</span>`,`20.0`,`15.0`,`15.0`,`15.0`],[`<code>spec/apollo-federation/any_spec.rb</code>`,`Ruby`,`<span class="good">95.0</span>`,`<span class="badge good">A</span>`,`20.0`,`15.0`,`15.0`,`15.0`],[`<code>spec/spec_helper.rb</code>`,`Ruby`,`<span class="good">95.0</span>`,`<span class="badge good">A</span>`,`20.0`,`15.0`,`15.0`,`15.0`]]</script></div></section><section class=section id=trends><div class=section-header><h2>Historical Trends</h2></div><p class=section-subtitle>How code quality has changed over time<div class=card style=margin-bottom:1.5rem><div class=narrative><p>The codebase is stable with a very slight downward trend (slope: -0.14, R-squared: 0.43). The overall score dropped 1 point from 89 to 88 between Feb and Apr 2025, then held steady for nearly a year. The initial drop was driven by minor declines in duplication (92 to 91) and cohesion (69 to 67), coinciding with graphql-ruby 2.3 compatibility work (commits #294, #282) and the v3.10.0/v3.10.1 releases. Since Apr 2025, the score has been flat at 88 despite significant CI/infrastructure churn (GitHub Actions migration, semantic-release fixes). Complexity (95), smells (100), TDG (93), and SATD (86) have shown zero trend over the entire period. Cohesion is the weakest and most declining component (slope: -0.29), sitting at 67 with an average LCOM of 3.3 across 74 classes. Coupling shows a marginal decline from 88 to 87 in the latest measurement. This is a mature, low-activity library where the health metrics are essentially flat -- no intervention is urgently needed, but cohesion remains the primary area for improvement.</div></div><div class=stat-grid><div class=stat-box><div class=value>89</div><div class=label>Starting Score</div></div><div class=stat-box><div class=value>88</div><div class=label>Current Score</div></div><div class=stat-box><div class=value style=color:var(--accent-yellow)>-0.14</div><div class=label>Monthly Change</div></div><div class=stat-box><div class=value>0.43</div><div class=label>Trend Fit (R2)</div></div></div><div class=chart-container><h3>Health Score Over Time</h3><div class=chart-wrapper><div id=trendsChart style=width:100%;height:350px></div></div></div><div class=chart-container><h3>Component Trends</h3><div class=chart-wrapper><div id=componentTrendsChart style=width:100%;height:350px></div></div></div><div class=card><h3>Notable Events</h3><table id=notable-events-table><thead><tr><th>Period<th>Change<th>Driver<th>Description<tbody><tr data-period="Feb 2025" data-driver=complexity style=background:#3fb95015><td><strong>Feb 2025</strong><td><span class="badge low">0 pts</span><td>complexity<td class=event-description style=color:var(--text-secondary);font-size:.85rem><tr data-period="Apr 2025" data-driver=cohesion style=background:#f8514915><td><strong>Apr 2025</strong><td><span class="badge high">-1 pts</span><td>cohesion<td class=event-description style=color:var(--text-secondary);font-size:.85rem><tr data-period="Oct 2025" data-driver=coupling style=background:#3fb95015><td><strong>Oct 2025</strong><td><span class="badge low">0 pts</span><td>coupling<td class=event-description style=color:var(--text-secondary);font-size:.85rem><tr data-period="Feb 2026" data-driver=coupling style=background:#3fb95015><td><strong>Feb 2026</strong><td><span class="badge low">0 pts</span><td>coupling<td class=event-description style=color:var(--text-secondary);font-size:.85rem></table></div></section><section class=section id=churn><div class=section-header><h2>Change Activity</h2></div><p class=section-subtitle>How frequently code is being modified<div class=card style=margin-bottom:1.5rem><div class=narrative><p>Churn in this repository is low overall (mean churn score 0.21, median 0.16) with most activity concentrated in non-source files. The top 5 files by raw change volume account for 54% of all additions and deletions, and three of those five are generated or configuration artifacts: Gemfile.lock (8 commits, 257 days active), CHANGELOG.md (6 commits, automated releases), and version.rb (7 commits, all semantic-release bumps). These are expected churn from the release pipeline and do not indicate design problems. The one source file with genuinely sustained and concerning churn is lib/apollo-federation/tracing/tracer.rb (4 commits over 197 days, relative churn 0.30). Its commit history is dominated by bug fixes: 'tracer crash with graphql-ruby 2.5.12+', 'add support for multiplex', 'properly handle parsing and validation errors'. This repeated fix pattern across different graphql-ruby versions signals a fragile coupling to upstream API changes; the tracer module is the primary defect-prone area in the codebase. Its companion test file spec/apollo-federation/tracing_spec.rb mirrors this pattern with a high relative churn of 0.73 across 705 LOC. The .github/workflows/ci.yml file shows an intense burst of 7 commits in just 19 days (relative churn 1.14), but these are all CI configuration adjustments for the CircleCI-to-GitHub-Actions migration and semantic-release token setup -- operational churn, not a code quality signal. The proto file apollo_pb.rb has the highest relative churn (6.07) but from a single commit that rewrote most of the file; this is a one-time regeneration, not a pattern. Overall, the only actionable finding is the tracer module's repeated breakage against upstream graphql-ruby changes, which would benefit from an adapter or abstraction layer to isolate version-specific behavior.</div></div><div class=stat-grid><div class=stat-box><div class=value>68</div><div class=label>Total Changes</div></div><div class=stat-box><div class=value>34</div><div class=label>Files Changed</div></div><div class=stat-box><div class=value>922</div><div class=label>Lines Added</div></div><div class=stat-box><div class=value>1543</div><div class=label>Lines Deleted</div></div></div><div class=table-container><table id=churn-table><thead><tr><th>File<th>Lang<th><span data-tooltip="Number of commits that modified this file in the analysis period." class=tooltip>Changes</span><th><span data-tooltip="Number of unique authors who modified this file." class=tooltip>Contributors</span><th><span data-tooltip="Normalized score combining commit frequency and lines changed. Higher = more volatile." class=tooltip>Churn Score</span></thead></table><script>window.__td_churn=[[`<code>Gemfile.lock</code>`,``,`8`,`4`,`<span class="badge critical">0.687</span>`],[`<code>.github/workflows/ci.yml</code>`,``,`7`,`1`,`<span class="badge critical">0.650</span>`],[`<code>spec/apollo-federation/tracing_spec.rb</code>`,`Ruby`,`2`,`2`,`<span class="badge critical">0.550</span>`],[`<code>lib/apollo-federation/version.rb</code>`,`Ruby`,`7`,`3`,`<span class="badge critical">0.536</span>`],[`<code>CHANGELOG.md</code>`,``,`6`,`2`,`<span class="badge critical">0.488</span>`],[`<code>lib/apollo-federation/tracing/tracer.rb</code>`,`Ruby`,`4`,`2`,`<span class="badge critical">0.367</span>`],[`<code>lib/apollo-federation/tracing/proto/apollo_pb.rb</code>`,`Ruby`,`1`,`1`,`<span class="badge critical">0.336</span>`],[`<code>README.md</code>`,``,`4`,`2`,`<span class="badge critical">0.308</span>`],[`<code>.circleci/config.yml</code>`,``,`2`,`2`,`<span class="badge high">0.284</span>`],[`<code>apollo-federation.gemspec</code>`,`Ruby`,`3`,`2`,`<span class="badge high">0.237</span>`],[`<code>spec/apollo-federation/service_field_v2_spec.rb</code>`,`Ruby`,`1`,`1`,`<span class="badge high">0.188</span>`],[`<code>gemfiles/graphql_1.12.gemfile.lock</code>`,``,`1`,`1`,`<span class="badge high">0.174</span>`],[`<code>gemfiles/graphql_1.13.gemfile.lock</code>`,``,`1`,`1`,`<span class="badge high">0.174</span>`],[`<code>gemfiles/graphql_1.10.gemfile.lock</code>`,``,`1`,`1`,`<span class="badge high">0.174</span>`],[`<code>gemfiles/graphql_2.0.gemfile.lock</code>`,``,`1`,`1`,`<span class="badge high">0.174</span>`],[`<code>gemfiles/graphql_1.11.gemfile.lock</code>`,``,`1`,`1`,`<span class="badge high">0.174</span>`],[`<code>spec/apollo-federation/service_field_v1_spec.rb</code>`,`Ruby`,`1`,`1`,`<span class="badge high">0.159</span>`],[`<code>Appraisals</code>`,``,`1`,`1`,`<span class="badge medium">0.091</span>`],[`<code>lib/apollo-federation/federated_document_from_schema_definition.rb</code>`,`Ruby`,`1`,`1`,`<span class="badge medium">0.090</span>`],[`<code>gemfiles/graphql_1.13.gemfile</code>`,``,`1`,`1`,`<span class="badge medium">0.080</span>`],[`<code>example/products.rb</code>`,`Ruby`,`1`,`1`,`<span class="badge medium">0.080</span>`],[`<code>gemfiles/graphql_2.0.gemfile</code>`,``,`1`,`1`,`<span class="badge medium">0.080</span>`],[`<code>gemfiles/graphql_1.11.gemfile</code>`,``,`1`,`1`,`<span class="badge medium">0.080</span>`],[`<code>gemfiles/graphql_1.10.gemfile</code>`,``,`1`,`1`,`<span class="badge medium">0.080</span>`],[`<code>example/accounts.rb</code>`,`Ruby`,`1`,`1`,`<span class="badge medium">0.080</span>`],[`<code>gemfiles/graphql_1.12.gemfile</code>`,``,`1`,`1`,`<span class="badge medium">0.080</span>`],[`<code>example/inventory.rb</code>`,`Ruby`,`1`,`1`,`<span class="badge medium">0.080</span>`],[`<code>example/reviews.rb</code>`,`Ruby`,`1`,`1`,`<span class="badge medium">0.080</span>`],[`<code>.github/workflows/semantic.yml</code>`,``,`1`,`1`,`<span class="badge medium">0.077</span>`],[`<code>release.config.js</code>`,`JavaScript`,`1`,`1`,`<span class="badge medium">0.077</span>`],[`<code>.ruby-version</code>`,``,`1`,`1`,`<span class="badge medium">0.077</span>`],[`<code>spec/apollo-federation/entities_field_spec.rb</code>`,`Ruby`,`1`,`1`,`<span class="badge medium">0.077</span>`],[`<code>Gemfile</code>`,``,`1`,`1`,`<span class="badge medium">0.077</span>`],[`<code>.rubocop.yml</code>`,``,`1`,`1`,`<span class="badge medium">0.076</span>`]]</script></div></section><section class=section id=ownership><div class=section-header><h2>Code Ownership</h2></div><p class=section-subtitle>How knowledge is distributed - concentrated knowledge is a risk<div class=card style=margin-bottom:1.5rem><div class=narrative><p>Ownership is dangerously concentrated around Rylan Collins, who is the primary owner of 23 out of 46 files (50%), including 4 sole-ownership silos in core library code (entity.rb, service.rb) and infrastructure (jest.config.js, babel.config.js). Lenny Burdette is the sole knowledge holder for the entire tracing subsystem (tracing/proto.rb, tracing/node_map.rb, and primary owner of tracing/tracer.rb). Dan Weinand owns 5 near-identical type extension files (argument.rb, enum_value.rb, enum.rb, input_object.rb, scalar.rb, union.rb) with only Joel Turkel as a minor secondary contributor. There are 7 complete silos (100% single-owner files) and 23 high-risk files total. The bus factor of 3 is misleading -- it reflects the repo-wide metric, but at the subsystem level the bus factor is effectively 1 for tracing (Lenny Burdette) and for core federation types (Dan Weinand). Recommended actions: (1) Require cross-reviewer assignments so Rylan Collins's files get reviewed by at least one other contributor. (2) Pair another developer into the tracing subsystem urgently, as tracer.rb (283 lines) is the most complex single-owner-dominated file in the project. (3) Have Dan Weinand or Joel Turkel document the pattern used in the type extension files so others can maintain them.</div></div><div class=stat-grid><div class=stat-box><div class=value style=color:var(--accent-yellow)>3</div><div class=label><span data-tooltip="Minimum people who would need to leave before critical knowledge is lost. Higher is better; 1 is a serious risk." class=tooltip>Bus Factor</span></div></div><div class=stat-box><div class=value style=color:var(--accent-yellow)>7</div><div class=label><span data-tooltip="Files where one person has written most of the code. If they leave, knowledge is lost." class=tooltip>Knowledge Silos</span></div></div><div class=stat-box><div class=value>46</div><div class=label>Total Files</div></div><div class=stat-box><div class=value style=color:var(--accent-yellow)>15.2%</div><div class=label>Files at Risk</div></div></div><div class=chart-container><h3>Top Contributors</h3><div class=chart-wrapper style=height:280px><div id=ownershipChart style=width:100%;height:280px></div></div></div></section><section class=section id=breakdown><div class=section-header><h2>Score Breakdown</h2></div><p class=section-subtitle>How the health score is calculated from individual components<div class=grid-3><div class=component-card><div class=component-card-header><span class=component-card-name>Complexity</span><span class=component-card-weight>25%</span></div><div class="component-card-score good">95</div><div class=progress-bar><div class="progress-fill good" style=width:95%></div></div></div><div class=component-card><div class=component-card-header><span class=component-card-name>Duplication</span><span class=component-card-weight>20%</span></div><div class="component-card-score good">92</div><div class=progress-bar><div class="progress-fill good" style=width:92%></div></div></div><div class=component-card><div class=component-card-header><span class=component-card-name>Cohesion</span><span class=component-card-weight>15%</span></div><div class="component-card-score warning">67</div><div class=progress-bar><div class="progress-fill warning" style=width:67%></div></div></div><div class=component-card><div class=component-card-header><span class=component-card-name>Debt Gradient</span><span class=component-card-weight>15%</span></div><div class="component-card-score good">94</div><div class=progress-bar><div class="progress-fill good" style=width:94%></div></div></div><div class=component-card><div class=component-card-header><span class=component-card-name>Known Debt</span><span class=component-card-weight>10%</span></div><div class="component-card-score good">86</div><div class=progress-bar><div class="progress-fill good" style=width:86%></div></div></div><div class=component-card><div class=component-card-header><span class=component-card-name>Coupling</span><span class=component-card-weight>10%</span></div><div class="component-card-score good">88</div><div class=progress-bar><div class="progress-fill good" style=width:88%></div></div></div><div class=component-card><div class=component-card-header><span class=component-card-name>Code Smells</span><span class=component-card-weight>5%</span></div><div class="component-card-score good">100</div><div class=progress-bar><div class="progress-fill good" style=width:100%></div></div></div></div></section><section class=section id=glossary><div class=collapsible id=glossary-collapse><div onclick="toggleCollapsible('glossary-collapse')" class=collapsible-header><h3>Glossary of Terms</h3><span class=collapsible-toggle></span></div><div class=collapsible-content><div class=grid-2><div class=card><h3>Health Score</h3><p style=color:var(--text-secondary)>A weighted composite metric (0-100) measuring overall code quality. Above 80 is good, 60-80 needs attention, below 60 is concerning.</div><div class=card><h3>Hotspot</h3><p style=color:var(--text-secondary)>A file that is both complex AND frequently changed. These are the highest-risk areas because they're hard to change safely but get changed often.</div><div class=card><h3>Bus Factor</h3><p style=color:var(--text-secondary)>The minimum number of people who would need to leave before critical knowledge is lost. Higher is better; 1 is a serious risk.</div><div class=card><h3>Knowledge Silo</h3><p style=color:var(--text-secondary)>A file that only one person has ever touched. If that person leaves, the knowledge goes with them.</div><div class=card><h3>Cyclomatic Complexity</h3><p style=color:var(--text-secondary)>The number of independent paths through code. More paths means more test cases needed and more ways things can go wrong.</div><div class=card><h3>Cognitive Complexity</h3><p style=color:var(--text-secondary)>How hard code is to understand. Accounts for nesting, breaks in flow, and things that make humans struggle to follow the logic.</div><div class=card><h3>LCOM (Cohesion)</h3><p style=color:var(--text-secondary)>How well a class's methods work together. High LCOM means methods don't share data - the class is probably doing too many unrelated things.</div><div class=card><h3>CBO (Coupling)</h3><p style=color:var(--text-secondary)>How many other classes a class depends on. High coupling means changes ripple through the codebase - everything is connected to everything.</div><div class=card><h3>Churn Rate</h3><p style=color:var(--text-secondary)>How frequently a file changes. High churn indicates instability - the code may be unclear, have bugs, or be undergoing active development.</div><div class=card><h3>Self-Admitted Technical Debt (SATD)</h3><p style=color:var(--text-secondary)>Code issues the team has documented (TODO, FIXME, HACK, XXX). These represent known shortcuts that need eventual attention.</div><div class=card><h3>Code Clone / Duplicate</h3><p style=color:var(--text-secondary)>Similar code appearing in multiple places. When a bug is fixed in one spot, it may need fixing elsewhere. Candidates for refactoring into shared functions.</div><div class=card><h3>Technical Debt Gradient</h3><p style=color:var(--text-secondary)>Per-file quality score (0-100) combining complexity, duplication, coupling, and other factors. Lower scores mean more accumulated debt.</div><div class=card><h3>Temporal Coupling</h3><p style=color:var(--text-secondary)>Files that frequently change together in the same commits. High temporal coupling suggests hidden dependencies not visible in the import graph.</div><div class=card><h3>Architectural Smell</h3><p style=color:var(--text-secondary)>A structural pattern that violates design principles: cyclic dependencies, hub-like modules, or stable code depending on unstable code.</div><div class=card><h3>Instability</h3><p style=color:var(--text-secondary)>Ratio of outgoing to total dependencies. 0 = maximally stable (many things depend on it), 1 = maximally unstable (depends on many things).</div><div class=card><h3>PageRank</h3><p style=color:var(--text-secondary)>Importance of a file in the dependency graph. Files with high PageRank are depended on by many other important files.</div></div></div></div></section><footer><p>Generated <span class=human-date data-iso=2026-02-01T02:06:27.555996Z>2026-02-01T02:06:27.555996Z</span> using <a href=https://github.com/panbanda/omen>Omen</a></footer></main><script src=https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js></script><script src=https://cdn.jsdelivr.net/npm/simple-datatables@9></script><script src=https://cdn.jsdelivr.net/npm/date-fns@4/cdn.min.js></script><script src=https://unpkg.com/@popperjs/core@2></script><script src=https://unpkg.com/tippy.js@6></script><script src=https://cdn.jsdelivr.net/npm/marked/marked.min.js></script><script>var toggleCollapsible=(a=>{const b=document.getElementById(a);b.classList.toggle(`open`)});const sections=document.querySelectorAll(`.section[id]`);const navItems=document.querySelectorAll(`.nav-item`);window.addEventListener(`scroll`,()=>{let a=``;sections.forEach(b=>{const c=b.offsetTop;window.scrollY>=c- 100&&(a=b.getAttribute(`id`))});navItems.forEach(b=>{b.classList.remove(`active`);b.getAttribute(`href`)===`#`+ a&&b.classList.add(`active`)})});document.querySelectorAll(`.stat-box .value, .metric-card-value`).forEach(a=>{const b=a.textContent.trim();/^\d+$/.test(b)&&(a.textContent=parseInt(b,10).toLocaleString())});document.querySelectorAll(`.time-ago`).forEach(a=>{const b=a.dataset.timestamp;if(!b)return a.textContent=`-`,undefined;const c=new Date(b);if(isNaN(c.getTime()))return a.textContent=`-`,undefined;a.textContent=dateFns.formatDistanceToNow(c,{addSuffix:!1});a.title=dateFns.format(c,`MMM d, yyyy`)});const dataTableConfig={perPage:15,perPageSelect:[10,15,25,50,100],searchable:!0,sortable:!0,labels:{placeholder:`Search...`,perPage:`entries per page`,noRows:`No entries found`,info:`Showing {start} to {end} of {rows} entries`}};const dataTableInstances={};const jsonTableMap={'hotspots-table':window.__td_hotspots,'cohesion-table':window.__td_cohesion,'graph-table':window.__td_graph,'satd-table':window.__td_satd,'tdg-table':window.__td_tdg,'churn-table':window.__td_churn,'temporal-table':window.__td_temporal};const tableIds=[`hotspots-table`,`flags-table`,`cohesion-table`,`satd-table`,`churn-table`,`smells-table`,`graph-table`,`tdg-table`,`temporal-table`];tableIds.forEach(a=>{const b=document.getElementById(a);if(!b)return undefined;const c=jsonTableMap[a];if(c&&c.length){const d=Array.from(b.querySelectorAll(`thead th`)).map(a=>a.innerHTML);dataTableInstances[a]=new simpleDatatables.DataTable(b,{...dataTableConfig,data:{headings:d,data:c}})}else b.querySelector(`tbody tr`)&&(dataTableInstances[a]=new simpleDatatables.DataTable(b,dataTableConfig))});document.querySelectorAll(`.human-date`).forEach((a=>{var b=a.getAttribute(`data-iso`);if(!b)return undefined;try{var c=new Date(b);a.textContent=c.toLocaleDateString(undefined,{year:`numeric`,month:`short`,day:`numeric`,hour:`2-digit`,minute:`2-digit`});a.title=b}catch(a){}}));tippy(`.tooltip`,{content:a=>a.getAttribute(`data-tooltip`),placement:`bottom`,arrow:!0,maxWidth:300,appendTo:document.body})</script><script>var initChart=(a=>{if(!a)return null;const b=echarts.init(a,null,{renderer:`canvas`});echartsInstances.push(b);return b});const echartsInstances=[];const palette={blue:`#58a6ff`,green:`#3fb950`,yellow:`#d29922`,red:`#f85149`,purple:`#a371f7`,gray:`#8b949e`,bg:`#161b22`,border:`#30363d`,text:`#8b949e`,textPrimary:`#e6edf3`};(()=>{const a=document.getElementById(`radarChart`);if(!a)return undefined;const b=initChart(a);b.setOption({radar:{indicator:[{name:`Complexity`,max:100},{name:`Duplication`,max:100},{name:`Cohesion`,max:100},{name:`Coupling`,max:100},{name:`Debt`,max:100},{name:`Smells`,max:100}],axisName:{color:palette.text,fontSize:10},splitLine:{lineStyle:{color:palette.border}},splitArea:{show:!1},axisLine:{lineStyle:{color:palette.border}}},tooltip:{},series:[{type:`radar`,data:[{value:[95,92,67,88,86,100],areaStyle:{color:`rgba(88,166,255,0.2)`},lineStyle:{color:palette.blue,width:2},itemStyle:{color:palette.blue},emphasis:{areaStyle:{color:`rgba(88,166,255,0.35)`}}}]}]})})();(()=>{var a=document.getElementById(`duplicationGauge`);if(!a)return undefined;var b=initChart(a);b.setOption({series:[{type:`gauge`,startAngle:200,endAngle:-20,min:0,max:100,axisLine:{lineStyle:{width:20,color:[[0.1,palette.green],[0.2,palette.yellow],[1,palette.red]]}},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{color:palette.text,fontSize:11,distance:-30},pointer:{width:5,length:`60%`,itemStyle:{color:palette.textPrimary}},detail:{valueAnimation:!0,formatter:`{value}%`,fontSize:24,fontWeight:`bold`,color:palette.textPrimary,offsetCenter:[0,`60%`]},title:{show:!1},data:[{value:4.1}]}]})})()</script><script>var findLabelIndex=((a,b)=>a.findIndex((a=>a.startsWith(b))));var periodToDate=(a=>{var b=a.split(` `);if(b.length===2&&monthNames[b[0]])return b[1]+ `-`+ monthNames[b[0]];return a});var formatDateLabel=(a=>{var b=[`Jan`,`Feb`,`Mar`,`Apr`,`May`,`Jun`,`Jul`,`Aug`,`Sep`,`Oct`,`Nov`,`Dec`];var c=a.substring(0,10).split(`-`);return b[parseInt(c[1],10)- 1]+ ` `+ c[0]});var trendsDataRaw={labels:[`2025-02-11`,`2025-04-04`,`2025-10-19`,`2025-10-30`,`2025-11-09`,`2026-02-01`],scores:[89,88,88,88,88,88]};var trendsData={labels:trendsDataRaw.labels.map(formatDateLabel),rawLabels:trendsDataRaw.labels,scores:trendsDataRaw.scores};var scoreAnnotations=[{"change":0,"date":`2025-02`,"description":`Starting score of 89 following v3.9.0 and v3.10.0 releases (drop old Ruby, update google-protobuf).`,"label":`Baseline`},{"change":-1,"date":`2025-04`,"description":`Score dropped to 88 as duplication fell from 92 to 91 and cohesion fell from 69 to 67, coinciding with graphql-ruby 2.3 compatibility changes (#282, #294) and the v3.10.1 release.`,"label":`Minor decline`},{"change":0,"date":`2025-10`,"description":`Score held at 88 despite significant CI and release infrastructure changes (GitHub Actions migration, semantic-release token fixes). No code-quality-affecting changes.`,"label":`Stable through CI overhaul`},{"change":0,"date":`2026-02`,"description":`Overall score remains 88 but coupling edged down from 88 to 87. All other components unchanged.`,"label":`Coupling micro-decline`}];var componentAnnotations={"cohesion":[{"date":`2025-04`,"description":`graphql-ruby 2.3 compatibility work added methods to tracer.rb and federated_document_from_schema_definition.rb without corresponding field consolidation, widening the LCOM gap.`,"from":69,"label":`Cohesion decline from compatibility changes`,"to":67}],"complexity":[],"coupling":[{"date":`2026-02`,"description":`Small 1-point decline in the latest measurement. No specific causal commit identified; likely minor structural drift from ongoing maintenance.`,"from":88,"label":`Minor coupling drift`,"to":87}],"duplication":[{"date":`2025-04`,"description":`PRs #282 and #294 added parallel tracer implementation for graphql-ruby 2.3 compatibility, introducing minor duplication in lib/apollo-federation/tracing/tracer.rb.`,"from":92,"label":`graphql-ruby 2.3 compatibility`,"to":91}],"satd":[],"smells":[],"tdg":[]};var notableCommitsByPeriod={};var trendPointCommits=[{date:`2025-02-11`,commits:[`chore(release): 3.10.0 [skip ci]`,`feat: update google-protobuf (#291)`,`chore(release): 3.9.0 [skip ci]`,`feat: drop old ruby; remove appraisals (#290)`]},{date:`2025-04-04`,commits:[`chore(release): 3.10.1 [skip ci]`,`fix: graphql-ruby 2.3 compatibility (#294)`,`graphql-ruby 2.3 compatibility (#282)`]},{date:`2025-10-19`,commits:[`chore: use token to push semantic release commit (#304)`,`chore: configure bundler to not freeze the bundle during semantic release (#303)`,`fix: tracer crash with graphql-ruby 2.5.12+ (#302)`,`chore: "Fix tracer crash with graphql-ruby 2.5.12+ (#297)" (#300)`,`chore: switch to using GitHub Actions for CI (#299)`]},{date:`2025-10-30`,commits:[`chore(release): 3.10.3 [skip ci]`,`fix: random update to README.md to trigger semantic-release (#310)`,`Revert "chore(release): 3.10.2 [skip ci]" (#309)`,`chore(release): 3.10.2 [skip ci]`,`chore: also checkout with semantic-release token (#308)`]},{date:`2025-11-09`,commits:[`chore: use secrets not vars for app token (#313)`,`chore: use app token for semantic release (#312)`]}];trendPointCommits.forEach((a=>{var b=a.date.substring(0,7);!notableCommitsByPeriod[b]&&(notableCommitsByPeriod[b]=[]);notableCommitsByPeriod[b]=notableCommitsByPeriod[b].concat(a.commits)}));var monthNames={Jan:`01`,Feb:`02`,Mar:`03`,Apr:`04`,May:`05`,Jun:`06`,Jul:`07`,Aug:`08`,Sep:`09`,Oct:`10`,Nov:`11`,Dec:`12`};document.querySelectorAll(`#notable-events-table tbody tr[data-period]`).forEach((a=>{var b=a.getAttribute(`data-period`);var c=periodToDate(b);var d=a.getAttribute(`data-driver`).toLowerCase();var e=a.querySelector(`.event-description`);if(!e)return undefined;var f=componentAnnotations[d];if(f){var g=f.find((a=>a.date===c));if(g)return e.innerHTML=marked.parse(g.description),undefined};var h=notableCommitsByPeriod[b];h&&h.length>0&&(e.classList.add(`event-commits`),e.title=h.join(`
`),e.textContent=h.slice(0,3).join(`; `))}));var healthMarkLines=[];scoreAnnotations.forEach((a=>{var c;var b=findLabelIndex(trendsData.rawLabels,a.date);b!==-1&&(c=a.change<0?`#f85149`:`#3fb950`,healthMarkLines.push({xAxis:trendsData.labels[b],lineStyle:{color:c+ `88`,type:`dashed`,width:2},label:{formatter:a.change<0?` `:` `,fontSize:12,color:c,position:`insideStartTop`,distance:4}}))}));(()=>{var a=document.getElementById(`trendsChart`);if(!a)return undefined;var b=initChart(a);var c=trendsData.labels.map(((a,b)=>(88.52380952380953+ -0.14285714285714285*b).toFixed(1)));var d=Math.min.apply(null,trendsData.scores)- 5;var e=Math.max.apply(null,trendsData.scores)+ 5;b.setOption({tooltip:{trigger:`axis`,extraCssText:`max-width: 420px; white-space: normal; word-wrap: break-word;`,formatter:(a=>{var b=a[0].dataIndex;var c=trendsData.rawLabels[b];var d=c.substring(0,7);var e=[a[0].axisValueLabel];a.forEach((a=>{e.push(a.marker+ ` `+ a.seriesName+ `: <strong>`+ a.value+ `</strong>`)}));var f=scoreAnnotations.find((a=>a.date===d));f&&e.push(`<br/><em>`+ f.label+ `</em>: `+ f.description);return e.join(`<br/>`)})},legend:{data:[`Health Score`,`Trend Line`],textStyle:{color:palette.text},top:0},grid:{left:50,right:30,top:40,bottom:80},dataZoom:[{type:`slider`,start:0,end:100,bottom:10,textStyle:{color:palette.text},borderColor:palette.border,fillerColor:`rgba(88,166,255,0.1)`},{type:`inside`}],xAxis:{type:`category`,data:trendsData.labels,axisLabel:{color:palette.text,rotate:45},axisLine:{lineStyle:{color:palette.border}}},yAxis:{type:`value`,min:d,max:e,name:`Score`,nameTextStyle:{color:palette.text},axisLabel:{color:palette.text},axisLine:{lineStyle:{color:palette.border}},splitLine:{lineStyle:{color:palette.border,type:`dashed`}}},series:[{name:`Health Score`,type:`line`,data:trendsData.scores,smooth:0.3,symbol:`circle`,symbolSize:6,lineStyle:{color:palette.blue,width:2},itemStyle:{color:palette.blue},areaStyle:{color:`rgba(88,166,255,0.15)`},markLine:{silent:!0,symbol:`none`,data:healthMarkLines}},{name:`Trend Line`,type:`line`,data:c,smooth:!1,symbol:`none`,lineStyle:{color:`#d2992288`,type:`dashed`,width:2},itemStyle:{color:`#d29922`}}]});window._trendsChart=b})();(()=>{var a=document.getElementById(`componentTrendsChart`);if(!a)return undefined;var b=initChart(a);var c=[`2025-02-11`,`2025-04-04`,`2025-10-19`,`2025-10-30`,`2025-11-09`,`2026-02-01`];var d=c.map(formatDateLabel);var e={complexity:`#3fb950`,duplication:`#58a6ff`,coupling:`#d29922`,cohesion:`#a371f7`,smells:`#f85149`};var f=[];Object.keys(componentAnnotations).forEach((a=>{var b=componentAnnotations[a];var g=e[a]||palette.gray;b.forEach((a=>{var b=findLabelIndex(c,a.date);b!==-1&&f.push({xAxis:d[b],lineStyle:{color:g+ `88`,type:`dashed`,width:2},label:{formatter:` `,fontSize:10,color:g,position:`insideStartTop`,distance:4}})}))}));b.setOption({tooltip:{trigger:`axis`,extraCssText:`max-width: 420px; white-space: normal; word-wrap: break-word;`,formatter:(a=>{var b=a[0].dataIndex;var d=c[b];var e=d.substring(0,7);var f=[a[0].axisValueLabel];a.forEach((a=>{f.push(a.marker+ ` `+ a.seriesName+ `: <strong>`+ a.value+ `</strong>`)}));Object.keys(componentAnnotations).forEach((a=>{var b=componentAnnotations[a];var c=b.find((a=>a.date===e));c&&f.push(`<br/><em>`+ a.toUpperCase()+ `</em>: `+ c.label+ ` - `+ c.description)}));return f.join(`<br/>`)})},legend:{data:[`Complexity`,`Duplication`,`Coupling`,`Cohesion`,`Smells`],textStyle:{color:palette.text},top:0},grid:{left:50,right:30,top:40,bottom:80},dataZoom:[{type:`slider`,start:0,end:100,bottom:10,textStyle:{color:palette.text},borderColor:palette.border,fillerColor:`rgba(88,166,255,0.1)`},{type:`inside`}],xAxis:{type:`category`,data:d,axisLabel:{color:palette.text,rotate:45},axisLine:{lineStyle:{color:palette.border}}},yAxis:{type:`value`,name:`Score`,nameTextStyle:{color:palette.text},axisLabel:{color:palette.text},axisLine:{lineStyle:{color:palette.border}},splitLine:{lineStyle:{color:palette.border,type:`dashed`}}},series:[{name:`Complexity`,type:`line`,smooth:0.3,symbol:`circle`,symbolSize:4,data:[95,95,95,95,95,95],lineStyle:{color:`#3fb950`},itemStyle:{color:`#3fb950`},markLine:{silent:!0,symbol:`none`,data:f}},{name:`Duplication`,type:`line`,smooth:0.3,symbol:`circle`,symbolSize:4,data:[92,91,91,91,91,91],lineStyle:{color:`#58a6ff`},itemStyle:{color:`#58a6ff`}},{name:`Coupling`,type:`line`,smooth:0.3,symbol:`circle`,symbolSize:4,data:[88,88,88,88,88,87],lineStyle:{color:`#d29922`},itemStyle:{color:`#d29922`}},{name:`Cohesion`,type:`line`,smooth:0.3,symbol:`circle`,symbolSize:4,data:[69,67,67,67,67,67],lineStyle:{color:`#a371f7`},itemStyle:{color:`#a371f7`}},{name:`Smells`,type:`line`,smooth:0.3,symbol:`circle`,symbolSize:4,data:[100,100,100,100,100,100],lineStyle:{color:`#f85149`},itemStyle:{color:`#f85149`}}]});window._trendsChart&&echarts.connect([window._trendsChart,b])})()</script><script>(()=>{var a=document.getElementById(`ownershipChart`);if(!a)return undefined;var b=initChart(a);var c=[`Rylan Collins`,`Dan Weinand`,`Lenny Burdette`,`Joel Turkel`,`Col`];var d=[23,8,6,3,2];var e=[palette.blue,palette.green,palette.yellow,palette.purple,palette.red,palette.gray,palette.blue,palette.green,palette.yellow,palette.purple];b.setOption({tooltip:{trigger:`axis`,axisPointer:{type:`shadow`}},grid:{left:120,right:40,top:10,bottom:10},xAxis:{type:`value`,axisLabel:{color:palette.text},axisLine:{lineStyle:{color:palette.border}},splitLine:{lineStyle:{color:palette.border,type:`dashed`}}},yAxis:{type:`category`,data:c,inverse:!0,axisLabel:{color:palette.text,fontSize:11},axisLine:{lineStyle:{color:palette.border}},axisTick:{show:!1}},series:[{type:`bar`,data:d.map(((a,b)=>({value:a,itemStyle:{color:new echarts.graphic.LinearGradient(0,0,1,0,[{offset:0,color:e[b%e.length]+ `88`},{offset:1,color:e[b%e.length]}]),borderRadius:[0,4,4,0]}}))),label:{show:!0,position:`insideRight`,color:palette.textPrimary,fontSize:11,fontWeight:`bold`},barMaxWidth:24}]})})()</script><script>(()=>{var a=document.getElementById(`tdgGradeChart`);if(!a)return undefined;var b=initChart(a);var c=[`A+`,`A`,`A-`,`B+`,`B`,`B-`,`C+`,`C`,`C-`,`D`,`F`];var d={'A+':`#3fb950`,'A':`#3fb950`,'A-':`#56d364`,'B+':`#58a6ff`,'B':`#58a6ff`,'B-':`#79c0ff`,'C+':`#d29922`,'C':`#d29922`,'C-':`#e3b341`,'D':`#f85149`,'F':`#da3633`};var e={"A":37,"A-":4,"B":1,"B+":3,"C+":1};var f=c.filter((a=>(e[a]||0)>0));b.setOption({tooltip:{trigger:`axis`,axisPointer:{type:`shadow`}},grid:{left:50,right:20,top:10,bottom:30},xAxis:{type:`category`,data:f,axisLabel:{color:palette.text,fontWeight:`bold`},axisLine:{lineStyle:{color:palette.border}},axisTick:{show:!1}},yAxis:{type:`value`,name:`Files`,nameTextStyle:{color:palette.text},axisLabel:{color:palette.text},axisLine:{lineStyle:{color:palette.border}},splitLine:{lineStyle:{color:palette.border,type:`dashed`}}},series:[{type:`bar`,data:f.map((a=>({value:e[a]||0,itemStyle:{color:d[a]||palette.gray,borderRadius:[4,4,0,0]}}))),label:{show:!0,position:`top`,color:palette.textPrimary,fontSize:11,fontWeight:`bold`},barMaxWidth:40}]})})()</script><script>(()=>{var d,e,g,h,i,j;var a={"categories":{"requirement":8},"critical":0,"high":0,"low":8,"medium":0};var b=[`40%`,`70%`];var c=document.getElementById(`satdSeverityChart`);c&&(d=initChart(c),e=a.critical+ a.high+ a.medium+ a.low,d.setOption({tooltip:{trigger:`item`,formatter:`{b}: {c} ({d}%)`},legend:{orient:`vertical`,right:10,top:`center`,textStyle:{color:palette.text}},series:[{type:`pie`,radius:b,center:[`40%`,`50%`],label:{show:!1},emphasis:{label:{show:!0,fontSize:14,fontWeight:`bold`,color:palette.textPrimary}},data:[{value:a.critical,name:`Critical`,itemStyle:{color:palette.red}},{value:a.high,name:`High`,itemStyle:{color:palette.yellow}},{value:a.medium,name:`Medium`,itemStyle:{color:palette.blue}},{value:a.low,name:`Low`,itemStyle:{color:palette.green}}].filter((a=>a.value>0))}],graphic:[{type:`text`,left:`37%`,top:`45%`,style:{text:e.toString(),fontSize:22,fontWeight:`bold`,fill:palette.textPrimary,textAlign:`center`}},{type:`text`,left:`37%`,top:`55%`,style:{text:`total`,fontSize:11,fill:palette.text,textAlign:`center`}}]}));var f=document.getElementById(`satdCategoryChart`);f&&(g=initChart(f),h=Object.keys(a.categories),i=[palette.blue,palette.green,palette.purple,palette.yellow,palette.red,palette.gray],j=h.reduce(((b,c)=>b+ a.categories[c]),0),g.setOption({tooltip:{trigger:`item`,formatter:`{b}: {c} ({d}%)`},legend:{orient:`vertical`,right:10,top:`center`,textStyle:{color:palette.text}},series:[{type:`pie`,radius:b,center:[`40%`,`50%`],label:{show:!1},emphasis:{label:{show:!0,fontSize:14,fontWeight:`bold`,color:palette.textPrimary}},data:h.map(((b,c)=>({value:a.categories[b],name:b,itemStyle:{color:i[c%i.length]}}))).filter((a=>a.value>0))}],graphic:[{type:`text`,left:`37%`,top:`45%`,style:{text:j.toString(),fontSize:22,fontWeight:`bold`,fill:palette.textPrimary,textAlign:`center`}},{type:`text`,left:`37%`,top:`55%`,style:{text:`total`,fontSize:11,fill:palette.text,textAlign:`center`}}]}))})()</script><script>window.addEventListener(`resize`,(()=>{echartsInstances.forEach((a=>{a.resize()}))}))</script>