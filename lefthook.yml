pre-commit:
  parallel: true
  commands:
    fmt:
      glob: "*.rs"
      run: cargo fmt
      stage_fixed: true
    lint:
      glob: "*.rs"
      run: cargo clippy --all-targets --all-features --fix --allow-dirty --allow-staged -- -D warnings
      stage_fixed: true
    tidy:
      run: cargo check --all-features

pre-push:
  parallel: true
  commands:
    test:
      run: cargo test --all-features
    coverage:
      run: cargo llvm-cov --all-features --fail-under-lines 95
      fail_text: "Coverage below 95% threshold"
